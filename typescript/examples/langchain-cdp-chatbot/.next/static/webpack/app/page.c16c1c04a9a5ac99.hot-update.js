"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/page",{

/***/ "(app-pages-browser)/./src/components/Chat.tsx":
/*!*********************************!*\
  !*** ./src/components/Chat.tsx ***!
  \*********************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/../../../node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/../../../node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_storage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/storage */ \"(app-pages-browser)/./src/lib/storage.ts\");\n/* harmony import */ var _hooks_useChatbot__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/hooks/useChatbot */ \"(app-pages-browser)/./src/hooks/useChatbot.ts\");\n/* harmony import */ var _ChatMessage__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./ChatMessage */ \"(app-pages-browser)/./src/components/ChatMessage.tsx\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \nvar _s = $RefreshSig$();\n\n\n\n\nconst Chat = ()=>{\n    _s();\n    const [inputValue, setInputValue] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const { messages, setMessages, isLoading, sendMessage } = (0,_hooks_useChatbot__WEBPACK_IMPORTED_MODULE_3__.useChatbot)();\n    const handleSubmit = async (e)=>{\n        e.preventDefault();\n        if (!inputValue.trim()) return;\n        const userMessage = {\n            content: inputValue,\n            role: \"user\",\n            timestamp: new Date().toISOString()\n        };\n        setMessages((prev)=>[\n                ...prev,\n                userMessage\n            ]);\n        setInputValue(\"\");\n        await sendMessage(inputValue);\n    };\n    const debugChat = ()=>{\n        const storage = _lib_storage__WEBPACK_IMPORTED_MODULE_2__.StorageService.getInstance();\n        console.log(\"Chat Debug:\");\n        console.log(\"Storage blocks:\", storage.getTimeBlocks());\n        console.log(\"Raw localStorage:\", localStorage.getItem(\"calendar_data\"));\n    };\n    const testAddEvent = ()=>{\n        const testEvent = {\n            _id: \"test-\".concat(Date.now()),\n            title: \"Test Event\",\n            startTime: new Date().toISOString(),\n            endTime: new Date().toISOString(),\n            priority: \"urgent-important\",\n            delegatable: false,\n            status: \"scheduled\",\n            created_at: new Date().toISOString(),\n            updated_at: new Date().toISOString()\n        };\n        const storage = _lib_storage__WEBPACK_IMPORTED_MODULE_2__.StorageService.getInstance();\n        console.log(\"Test: Adding event\");\n        storage.addTimeBlock(testEvent);\n        console.log(\"Test: Event added\");\n        const event = new CustomEvent(\"calendarUpdate\", {\n            detail: testEvent\n        });\n        window.dispatchEvent(event);\n        console.log(\"Test: Event dispatched\");\n    };\n    const testDirectAdd = ()=>{\n        const testEvent = {\n            _id: \"direct-\".concat(Date.now()),\n            title: \"Direct Test Event\",\n            startTime: new Date().toISOString(),\n            endTime: new Date().toISOString(),\n            priority: \"urgent-important\",\n            delegatable: false,\n            status: \"scheduled\",\n            created_at: new Date().toISOString(),\n            updated_at: new Date().toISOString()\n        };\n        const storage = _lib_storage__WEBPACK_IMPORTED_MODULE_2__.StorageService.getInstance();\n        console.log(\"Direct Test: Before adding:\", storage.getTimeBlocks());\n        storage.addTimeBlock(testEvent);\n        console.log(\"Direct Test: After adding:\", storage.getTimeBlocks());\n        const event = new CustomEvent(\"calendarUpdate\", {\n            detail: testEvent\n        });\n        window.dispatchEvent(event);\n    };\n    const testSendMessage = async ()=>{\n        try {\n            console.log(\"=== START testSendMessage ===\");\n            await sendMessage(\"can you add one urgent and important event at 2pm at 11th february for one hour?\");\n            console.log(\"=== END testSendMessage ===\");\n        } catch (error) {\n            console.error(\"Error in testSendMessage:\", error);\n        }\n    };\n    const testAPI = async ()=>{\n        console.log(\"Testing API route...\");\n        const response = await fetch(\"/api/test\");\n        console.log(\"Test API response:\", await response.text());\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"flex flex-col h-full bg-gray-50\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"bg-white shadow-sm px-6 py-4 border-b\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h1\", {\n                        className: \"text-xl font-semibold text-gray-800\",\n                        children: \"AI Assistant\"\n                    }, void 0, false, {\n                        fileName: \"/Users/muhammadaushijri/Desktop/git/Hower/typescript/examples/langchain-cdp-chatbot/src/components/Chat.tsx\",\n                        lineNumber: 105,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        className: \"text-sm text-gray-500\",\n                        children: \"Ask me to schedule events for you\"\n                    }, void 0, false, {\n                        fileName: \"/Users/muhammadaushijri/Desktop/git/Hower/typescript/examples/langchain-cdp-chatbot/src/components/Chat.tsx\",\n                        lineNumber: 106,\n                        columnNumber: 9\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/muhammadaushijri/Desktop/git/Hower/typescript/examples/langchain-cdp-chatbot/src/components/Chat.tsx\",\n                lineNumber: 104,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex-1 overflow-y-auto p-6 space-y-4\",\n                children: [\n                    messages.length === 0 ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"text-center text-gray-500 mt-8\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                children: \"\\uD83D\\uDC4B Hello! I can help you schedule events and arrange transportation.\"\n                            }, void 0, false, {\n                                fileName: \"/Users/muhammadaushijri/Desktop/git/Hower/typescript/examples/langchain-cdp-chatbot/src/components/Chat.tsx\",\n                                lineNumber: 113,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                className: \"text-sm mt-2\",\n                                children: 'Try saying: \"Schedule an urgent meeting tomorrow at 2pm\"'\n                            }, void 0, false, {\n                                fileName: \"/Users/muhammadaushijri/Desktop/git/Hower/typescript/examples/langchain-cdp-chatbot/src/components/Chat.tsx\",\n                                lineNumber: 114,\n                                columnNumber: 13\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/muhammadaushijri/Desktop/git/Hower/typescript/examples/langchain-cdp-chatbot/src/components/Chat.tsx\",\n                        lineNumber: 112,\n                        columnNumber: 11\n                    }, undefined) : messages.map((msg, i)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ChatMessage__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n                            message: msg\n                        }, i, false, {\n                            fileName: \"/Users/muhammadaushijri/Desktop/git/Hower/typescript/examples/langchain-cdp-chatbot/src/components/Chat.tsx\",\n                            lineNumber: 118,\n                            columnNumber: 13\n                        }, undefined)),\n                    isLoading && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex justify-center\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500\"\n                        }, void 0, false, {\n                            fileName: \"/Users/muhammadaushijri/Desktop/git/Hower/typescript/examples/langchain-cdp-chatbot/src/components/Chat.tsx\",\n                            lineNumber: 123,\n                            columnNumber: 13\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"/Users/muhammadaushijri/Desktop/git/Hower/typescript/examples/langchain-cdp-chatbot/src/components/Chat.tsx\",\n                        lineNumber: 122,\n                        columnNumber: 11\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/muhammadaushijri/Desktop/git/Hower/typescript/examples/langchain-cdp-chatbot/src/components/Chat.tsx\",\n                lineNumber: 110,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"form\", {\n                onSubmit: handleSubmit,\n                className: \"border-t bg-white p-4\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"max-w-4xl mx-auto relative\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                            type: \"text\",\n                            value: inputValue,\n                            onChange: (e)=>setInputValue(e.target.value),\n                            className: \"w-full border rounded-lg px-4 py-3 pr-12 focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500\",\n                            placeholder: \"Type your message...\",\n                            disabled: isLoading\n                        }, void 0, false, {\n                            fileName: \"/Users/muhammadaushijri/Desktop/git/Hower/typescript/examples/langchain-cdp-chatbot/src/components/Chat.tsx\",\n                            lineNumber: 131,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            type: \"submit\",\n                            disabled: isLoading || !inputValue.trim(),\n                            className: \"absolute right-3 top-1/2 -translate-y-1/2 text-blue-500 disabled:text-gray-300\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                className: \"w-6 h-6\",\n                                fill: \"none\",\n                                stroke: \"currentColor\",\n                                viewBox: \"0 0 24 24\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                    strokeLinecap: \"round\",\n                                    strokeLinejoin: \"round\",\n                                    strokeWidth: 2,\n                                    d: \"M12 19l9 2-9-18-9 18 9-2zm0 0v-8\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/muhammadaushijri/Desktop/git/Hower/typescript/examples/langchain-cdp-chatbot/src/components/Chat.tsx\",\n                                    lineNumber: 145,\n                                    columnNumber: 15\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"/Users/muhammadaushijri/Desktop/git/Hower/typescript/examples/langchain-cdp-chatbot/src/components/Chat.tsx\",\n                                lineNumber: 144,\n                                columnNumber: 13\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"/Users/muhammadaushijri/Desktop/git/Hower/typescript/examples/langchain-cdp-chatbot/src/components/Chat.tsx\",\n                            lineNumber: 139,\n                            columnNumber: 11\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/muhammadaushijri/Desktop/git/Hower/typescript/examples/langchain-cdp-chatbot/src/components/Chat.tsx\",\n                    lineNumber: 130,\n                    columnNumber: 9\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"/Users/muhammadaushijri/Desktop/git/Hower/typescript/examples/langchain-cdp-chatbot/src/components/Chat.tsx\",\n                lineNumber: 129,\n                columnNumber: 7\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/muhammadaushijri/Desktop/git/Hower/typescript/examples/langchain-cdp-chatbot/src/components/Chat.tsx\",\n        lineNumber: 102,\n        columnNumber: 5\n    }, undefined);\n};\n_s(Chat, \"zRHIVaNeJ8hCw3EL4ifbB4NwM3o=\", false, function() {\n    return [\n        _hooks_useChatbot__WEBPACK_IMPORTED_MODULE_3__.useChatbot\n    ];\n});\n_c = Chat;\n/* harmony default export */ __webpack_exports__[\"default\"] = (Chat);\nvar _c;\n$RefreshReg$(_c, \"Chat\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9jb21wb25lbnRzL0NoYXQudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUU0QztBQUNHO0FBSUM7QUFDUjtBQUV4QyxNQUFNSSxPQUFPOztJQUNYLE1BQU0sQ0FBQ0MsWUFBWUMsY0FBYyxHQUFHTiwrQ0FBUUEsQ0FBQztJQUM3QyxNQUFNLEVBQUVPLFFBQVEsRUFBRUMsV0FBVyxFQUFFQyxTQUFTLEVBQUVDLFdBQVcsRUFBRSxHQUFHUiw2REFBVUE7SUFFcEUsTUFBTVMsZUFBZSxPQUFPQztRQUMxQkEsRUFBRUMsY0FBYztRQUNoQixJQUFJLENBQUNSLFdBQVdTLElBQUksSUFBSTtRQUV4QixNQUFNQyxjQUFjO1lBQ2xCQyxTQUFTWDtZQUNUWSxNQUFNO1lBQ05DLFdBQVcsSUFBSUMsT0FBT0MsV0FBVztRQUNuQztRQUNBWixZQUFZYSxDQUFBQSxPQUFRO21CQUFJQTtnQkFBTU47YUFBWTtRQUMxQ1QsY0FBYztRQUNkLE1BQU1JLFlBQVlMO0lBQ3BCO0lBRUEsTUFBTWlCLFlBQVk7UUFDaEIsTUFBTUMsVUFBVXRCLHdEQUFjQSxDQUFDdUIsV0FBVztRQUMxQ0MsUUFBUUMsR0FBRyxDQUFDO1FBQ1pELFFBQVFDLEdBQUcsQ0FBQyxtQkFBbUJILFFBQVFJLGFBQWE7UUFDcERGLFFBQVFDLEdBQUcsQ0FBQyxxQkFBcUJFLGFBQWFDLE9BQU8sQ0FBQztJQUN4RDtJQUVBLE1BQU1DLGVBQWU7UUFDbkIsTUFBTUMsWUFBWTtZQUNoQkMsS0FBSyxRQUFtQixPQUFYYixLQUFLYyxHQUFHO1lBQ3JCQyxPQUFPO1lBQ1BDLFdBQVcsSUFBSWhCLE9BQU9DLFdBQVc7WUFDakNnQixTQUFTLElBQUlqQixPQUFPQyxXQUFXO1lBQy9CaUIsVUFBVTtZQUNWQyxhQUFhO1lBQ2JDLFFBQVE7WUFDUkMsWUFBWSxJQUFJckIsT0FBT0MsV0FBVztZQUNsQ3FCLFlBQVksSUFBSXRCLE9BQU9DLFdBQVc7UUFDcEM7UUFFQSxNQUFNRyxVQUFV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Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFPbkY7R0E3SU05RTs7UUFFc0RGLHlEQUFVQTs7O0tBRmhFRTtBQStJTiwrREFBZUEsSUFBSUEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9zcmMvY29tcG9uZW50cy9DaGF0LnRzeD8zNWNjIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50JztcblxuaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IFN0b3JhZ2VTZXJ2aWNlIH0gZnJvbSAnQC9saWIvc3RvcmFnZSc7XG5pbXBvcnQgeyBUaW1lQmxvY2tUeXBlIH0gZnJvbSAnQC90eXBlcyc7XG5pbXBvcnQgeyBpbml0aWFsaXplQWdlbnQgfSBmcm9tICdAL3NlcnZpY2VzL2NoYXRib3QnO1xuaW1wb3J0IHsgSHVtYW5NZXNzYWdlIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS9tZXNzYWdlc1wiO1xuaW1wb3J0IHsgdXNlQ2hhdGJvdCB9IGZyb20gJ0AvaG9va3MvdXNlQ2hhdGJvdCc7XG5pbXBvcnQgQ2hhdE1lc3NhZ2UgZnJvbSAnLi9DaGF0TWVzc2FnZSc7XG5cbmNvbnN0IENoYXQgPSAoKSA9PiB7XG4gIGNvbnN0IFtpbnB1dFZhbHVlLCBzZXRJbnB1dFZhbHVlXSA9IHVzZVN0YXRlKCcnKTtcbiAgY29uc3QgeyBtZXNzYWdlcywgc2V0TWVzc2FnZXMsIGlzTG9hZGluZywgc2VuZE1lc3NhZ2UgfSA9IHVzZUNoYXRib3QoKTtcblxuICBjb25zdCBoYW5kbGVTdWJtaXQgPSBhc3luYyAoZTogUmVhY3QuRm9ybUV2ZW50KSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGlmICghaW5wdXRWYWx1ZS50cmltKCkpIHJldHVybjtcblxuICAgIGNvbnN0IHVzZXJNZXNzYWdlID0ge1xuICAgICAgY29udGVudDogaW5wdXRWYWx1ZSxcbiAgICAgIHJvbGU6ICd1c2VyJyxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgfTtcbiAgICBzZXRNZXNzYWdlcyhwcmV2ID0+IFsuLi5wcmV2LCB1c2VyTWVzc2FnZV0pO1xuICAgIHNldElucHV0VmFsdWUoJycpO1xuICAgIGF3YWl0IHNlbmRNZXNzYWdlKGlucHV0VmFsdWUpO1xuICB9O1xuXG4gIGNvbnN0IGRlYnVnQ2hhdCA9ICgpID0+IHtcbiAgICBjb25zdCBzdG9yYWdlID0gU3RvcmFnZVNlcnZpY2UuZ2V0SW5zdGFuY2UoKTtcbiAgICBjb25zb2xlLmxvZygnQ2hhdCBEZWJ1ZzonKTtcbiAgICBjb25zb2xlLmxvZygnU3RvcmFnZSBibG9ja3M6Jywgc3RvcmFnZS5nZXRUaW1lQmxvY2tzKCkpO1xuICAgIGNvbnNvbGUubG9nKCdSYXcgbG9jYWxTdG9yYWdlOicsIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjYWxlbmRhcl9kYXRhJykpO1xuICB9O1xuXG4gIGNvbnN0IHRlc3RBZGRFdmVudCA9ICgpID0+IHtcbiAgICBjb25zdCB0ZXN0RXZlbnQgPSB7XG4gICAgICBfaWQ6IGB0ZXN0LSR7RGF0ZS5ub3coKX1gLFxuICAgICAgdGl0bGU6ICdUZXN0IEV2ZW50JyxcbiAgICAgIHN0YXJ0VGltZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgZW5kVGltZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgcHJpb3JpdHk6ICd1cmdlbnQtaW1wb3J0YW50JyBhcyBjb25zdCxcbiAgICAgIGRlbGVnYXRhYmxlOiBmYWxzZSxcbiAgICAgIHN0YXR1czogJ3NjaGVkdWxlZCcsXG4gICAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICB9O1xuXG4gICAgY29uc3Qgc3RvcmFnZSA9IFN0b3JhZ2VTZXJ2aWNlLmdldEluc3RhbmNlKCk7XG4gICAgY29uc29sZS5sb2coJ1Rlc3Q6IEFkZGluZyBldmVudCcpO1xuICAgIHN0b3JhZ2UuYWRkVGltZUJsb2NrKHRlc3RFdmVudCk7XG4gICAgY29uc29sZS5sb2coJ1Rlc3Q6IEV2ZW50IGFkZGVkJyk7XG4gICAgXG4gICAgY29uc3QgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ2NhbGVuZGFyVXBkYXRlJywge1xuICAgICAgZGV0YWlsOiB0ZXN0RXZlbnRcbiAgICB9KTtcbiAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gICAgY29uc29sZS5sb2coJ1Rlc3Q6IEV2ZW50IGRpc3BhdGNoZWQnKTtcbiAgfTtcblxuICBjb25zdCB0ZXN0RGlyZWN0QWRkID0gKCkgPT4ge1xuICAgIGNvbnN0IHRlc3RFdmVudCA9IHtcbiAgICAgIF9pZDogYGRpcmVjdC0ke0RhdGUubm93KCl9YCxcbiAgICAgIHRpdGxlOiAnRGlyZWN0IFRlc3QgRXZlbnQnLFxuICAgICAgc3RhcnRUaW1lOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICBlbmRUaW1lOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICBwcmlvcml0eTogJ3VyZ2VudC1pbXBvcnRhbnQnIGFzIGNvbnN0LFxuICAgICAgZGVsZWdhdGFibGU6IGZhbHNlLFxuICAgICAgc3RhdHVzOiAnc2NoZWR1bGVkJyxcbiAgICAgIGNyZWF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgIH07XG5cbiAgICBjb25zdCBzdG9yYWdlID0gU3RvcmFnZVNlcnZpY2UuZ2V0SW5zdGFuY2UoKTtcbiAgICBjb25zb2xlLmxvZygnRGlyZWN0IFRlc3Q6IEJlZm9yZSBhZGRpbmc6Jywgc3RvcmFnZS5nZXRUaW1lQmxvY2tzKCkpO1xuICAgIHN0b3JhZ2UuYWRkVGltZUJsb2NrKHRlc3RFdmVudCk7XG4gICAgY29uc29sZS5sb2coJ0RpcmVjdCBUZXN0OiBBZnRlciBhZGRpbmc6Jywgc3RvcmFnZS5nZXRUaW1lQmxvY2tzKCkpO1xuICAgIFxuICAgIGNvbnN0IGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCdjYWxlbmRhclVwZGF0ZScsIHtcbiAgICAgIGRldGFpbDogdGVzdEV2ZW50XG4gICAgfSk7XG4gICAgd2luZG93LmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICB9O1xuXG4gIGNvbnN0IHRlc3RTZW5kTWVzc2FnZSA9IGFzeW5jICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc29sZS5sb2coJz09PSBTVEFSVCB0ZXN0U2VuZE1lc3NhZ2UgPT09Jyk7XG4gICAgICBhd2FpdCBzZW5kTWVzc2FnZSgnY2FuIHlvdSBhZGQgb25lIHVyZ2VudCBhbmQgaW1wb3J0YW50IGV2ZW50IGF0IDJwbSBhdCAxMXRoIGZlYnJ1YXJ5IGZvciBvbmUgaG91cj8nKTtcbiAgICAgIGNvbnNvbGUubG9nKCc9PT0gRU5EIHRlc3RTZW5kTWVzc2FnZSA9PT0nKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gdGVzdFNlbmRNZXNzYWdlOicsIGVycm9yKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgdGVzdEFQSSA9IGFzeW5jICgpID0+IHtcbiAgICBjb25zb2xlLmxvZygnVGVzdGluZyBBUEkgcm91dGUuLi4nKTtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCcvYXBpL3Rlc3QnKTtcbiAgICBjb25zb2xlLmxvZygnVGVzdCBBUEkgcmVzcG9uc2U6JywgYXdhaXQgcmVzcG9uc2UudGV4dCgpKTtcbiAgfTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBoLWZ1bGwgYmctZ3JheS01MFwiPlxuICAgICAgey8qIEhlYWRlciAqL31cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctd2hpdGUgc2hhZG93LXNtIHB4LTYgcHktNCBib3JkZXItYlwiPlxuICAgICAgICA8aDEgY2xhc3NOYW1lPVwidGV4dC14bCBmb250LXNlbWlib2xkIHRleHQtZ3JheS04MDBcIj5BSSBBc3Npc3RhbnQ8L2gxPlxuICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtZ3JheS01MDBcIj5Bc2sgbWUgdG8gc2NoZWR1bGUgZXZlbnRzIGZvciB5b3U8L3A+XG4gICAgICA8L2Rpdj5cblxuICAgICAgey8qIE1lc3NhZ2VzICovfVxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4LTEgb3ZlcmZsb3cteS1hdXRvIHAtNiBzcGFjZS15LTRcIj5cbiAgICAgICAge21lc3NhZ2VzLmxlbmd0aCA9PT0gMCA/IChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtY2VudGVyIHRleHQtZ3JheS01MDAgbXQtOFwiPlxuICAgICAgICAgICAgPHA+8J+RiyBIZWxsbyEgSSBjYW4gaGVscCB5b3Ugc2NoZWR1bGUgZXZlbnRzIGFuZCBhcnJhbmdlIHRyYW5zcG9ydGF0aW9uLjwvcD5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc20gbXQtMlwiPlRyeSBzYXlpbmc6IFwiU2NoZWR1bGUgYW4gdXJnZW50IG1lZXRpbmcgdG9tb3Jyb3cgYXQgMnBtXCI8L3A+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICkgOiAoXG4gICAgICAgICAgbWVzc2FnZXMubWFwKChtc2csIGkpID0+IChcbiAgICAgICAgICAgIDxDaGF0TWVzc2FnZSBrZXk9e2l9IG1lc3NhZ2U9e21zZ30gLz5cbiAgICAgICAgICApKVxuICAgICAgICApfVxuICAgICAgICB7aXNMb2FkaW5nICYmIChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1jZW50ZXJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYW5pbWF0ZS1zcGluIHJvdW5kZWQtZnVsbCBoLTggdy04IGJvcmRlci1iLTIgYm9yZGVyLWJsdWUtNTAwXCI+PC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cblxuICAgICAgey8qIElucHV0ICovfVxuICAgICAgPGZvcm0gb25TdWJtaXQ9e2hhbmRsZVN1Ym1pdH0gY2xhc3NOYW1lPVwiYm9yZGVyLXQgYmctd2hpdGUgcC00XCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWF4LXctNHhsIG14LWF1dG8gcmVsYXRpdmVcIj5cbiAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICAgIHZhbHVlPXtpbnB1dFZhbHVlfVxuICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXRJbnB1dFZhbHVlKGUudGFyZ2V0LnZhbHVlKX1cbiAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBib3JkZXIgcm91bmRlZC1sZyBweC00IHB5LTMgcHItMTIgZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOmJvcmRlci1ibHVlLTUwMCBmb2N1czpyaW5nLTEgZm9jdXM6cmluZy1ibHVlLTUwMFwiXG4gICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlR5cGUgeW91ciBtZXNzYWdlLi4uXCJcbiAgICAgICAgICAgIGRpc2FibGVkPXtpc0xvYWRpbmd9XG4gICAgICAgICAgLz5cbiAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICB0eXBlPVwic3VibWl0XCJcbiAgICAgICAgICAgIGRpc2FibGVkPXtpc0xvYWRpbmcgfHwgIWlucHV0VmFsdWUudHJpbSgpfVxuICAgICAgICAgICAgY2xhc3NOYW1lPVwiYWJzb2x1dGUgcmlnaHQtMyB0b3AtMS8yIC10cmFuc2xhdGUteS0xLzIgdGV4dC1ibHVlLTUwMCBkaXNhYmxlZDp0ZXh0LWdyYXktMzAwXCJcbiAgICAgICAgICA+XG4gICAgICAgICAgICA8c3ZnIGNsYXNzTmFtZT1cInctNiBoLTZcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIj5cbiAgICAgICAgICAgICAgPHBhdGggc3Ryb2tlTGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlTGluZWpvaW49XCJyb3VuZFwiIHN0cm9rZVdpZHRoPXsyfSBkPVwiTTEyIDE5bDkgMi05LTE4LTkgMTggOS0yem0wIDB2LThcIiAvPlxuICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9mb3JtPlxuICAgIDwvZGl2PlxuICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgQ2hhdDsgIl0sIm5hbWVzIjpbInVzZVN0YXRlIiwiU3RvcmFnZVNlcnZpY2UiLCJ1c2VDaGF0Ym90IiwiQ2hhdE1lc3NhZ2UiLCJDaGF0IiwiaW5wdXRWYWx1ZSIsInNldElucHV0VmFsdWUiLCJtZXNzYWdlcyIsInNldE1lc3NhZ2VzIiwiaXNMb2FkaW5nIiwic2VuZE1lc3NhZ2UiLCJoYW5kbGVTdWJtaXQiLCJlIiwicHJldmVudERlZmF1bHQiLCJ0cmltIiwidXNlck1lc3NhZ2UiLCJjb250ZW50Iiwicm9sZSIsInRpbWVzdGFtcCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInByZXYiLCJkZWJ1Z0NoYXQiLCJzdG9yYWdlIiwiZ2V0SW5zdGFuY2UiLCJjb25zb2xlIiwibG9nIiwiZ2V0VGltZUJsb2NrcyIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJ0ZXN0QWRkRXZlbnQiLCJ0ZXN0RXZlbnQiLCJfaWQiLCJub3ciLCJ0aXRsZSIsInN0YXJ0VGltZSIsImVuZFRpbWUiLCJwcmlvcml0eSIsImRlbGVnYXRhYmxlIiwic3RhdHVzIiwiY3JlYXRlZF9hdCIsInVwZGF0ZWRfYXQiLCJhZGRUaW1lQmxvY2siLCJldmVudCIsIkN1c3RvbUV2ZW50IiwiZGV0YWlsIiwid2luZG93IiwiZGlzcGF0Y2hFdmVudCIsInRlc3REaXJlY3RBZGQiLCJ0ZXN0U2VuZE1lc3NhZ2UiLCJlcnJvciIsInRlc3RBUEkiLCJyZXNwb25zZSIsImZldGNoIiwidGV4dCIsImRpdiIsImNsYXNzTmFtZSIsImgxIiwicCIsImxlbmd0aCIsIm1hcCIsIm1zZyIsImkiLCJtZXNzYWdlIiwiZm9ybSIsIm9uU3VibWl0IiwiaW5wdXQiLCJ0eXBlIiwidmFsdWUiLCJvbkNoYW5nZSIsInRhcmdldCIsInBsYWNlaG9sZGVyIiwiZGlzYWJsZWQiLCJidXR0b24iLCJzdmciLCJmaWxsIiwic3Ryb2tlIiwidmlld0JveCIsInBhdGgiLCJzdHJva2VMaW5lY2FwIiwic3Ryb2tlTGluZWpvaW4iLCJzdHJva2VXaWR0aCIsImQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/components/Chat.tsx\n"));

/***/ }),

/***/ "(app-pages-browser)/./src/hooks/useChatbot.ts":
/*!*********************************!*\
  !*** ./src/hooks/useChatbot.ts ***!
  \*********************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useChatbot: function() { return /* binding */ useChatbot; }\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(app-pages-browser)/../../../node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _services_chatbot__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/services/chatbot */ \"(app-pages-browser)/./src/services/chatbot.ts\");\n/* harmony import */ var _lib_storage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/storage */ \"(app-pages-browser)/./src/lib/storage.ts\");\n/* harmony import */ var _services_taxiService__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/services/taxiService */ \"(app-pages-browser)/./src/services/taxiService.ts\");\n/* __next_internal_client_entry_do_not_use__ useChatbot auto */ \n\n\n\nfunction useChatbot() {\n    const [messages, setMessages] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    // Load chat history from localStorage on mount\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        const savedMessages = localStorage.getItem(\"chat_history\");\n        if (savedMessages) {\n            setMessages(JSON.parse(savedMessages));\n        }\n    }, []);\n    // Save messages to localStorage whenever they change\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        localStorage.setItem(\"chat_history\", JSON.stringify(messages));\n    }, [\n        messages\n    ]);\n    const handleScheduleConflict = (newEvent, existingEvents)=>{\n        console.log(\"Checking conflicts for new event:\", {\n            title: newEvent.title,\n            start: newEvent.startTime,\n            priority: newEvent.priority\n        });\n        console.log(\"Existing events:\", existingEvents);\n        // Sort existing events by priority\n        const priorityOrder = {\n            \"urgent-important\": 3,\n            \"important\": 2,\n            \"urgent\": 1,\n            \"neither\": 0\n        };\n        // Find conflicting events\n        const conflicts = existingEvents.filter((event)=>{\n            const newStart = new Date(newEvent.startTime);\n            const newEnd = new Date(newEvent.endTime);\n            const eventStart = new Date(event.startTime);\n            const eventEnd = new Date(event.endTime);\n            const hasConflict = newStart >= eventStart && newStart < eventEnd || newEnd > eventStart && newEnd <= eventEnd || newStart <= eventStart && newEnd >= eventEnd;\n            if (hasConflict) {\n                console.log(\"Found conflict:\", {\n                    existingEvent: event.title,\n                    existingPriority: event.priority,\n                    newEvent: newEvent.title,\n                    newPriority: newEvent.priority\n                });\n            }\n            return hasConflict;\n        });\n        if (conflicts.length === 0) {\n            console.log(\"No conflicts found\");\n            return newEvent;\n        }\n        // Check if new event has higher priority\n        const newPriorityScore = priorityOrder[newEvent.priority];\n        const highestConflictScore = Math.max(...conflicts.map((e)=>priorityOrder[e.priority]));\n        console.log(\"Priority comparison:\", {\n            newEventScore: newPriorityScore,\n            highestConflictScore,\n            willRescheduleConflicts: newPriorityScore > highestConflictScore\n        });\n        if (newPriorityScore > highestConflictScore) {\n            // Move conflicting events\n            console.log(\"Moving conflicting events...\");\n            const storage = _lib_storage__WEBPACK_IMPORTED_MODULE_2__.StorageService.getInstance();\n            conflicts.forEach((conflict)=>{\n                // Move to next available time\n                const duration = new Date(conflict.endTime).getTime() - new Date(conflict.startTime).getTime();\n                const newStartTime = new Date(newEvent.endTime);\n                const newEndTime = new Date(newStartTime.getTime() + duration);\n                const updatedEvent = {\n                    ...conflict,\n                    startTime: newStartTime.toISOString(),\n                    endTime: newEndTime.toISOString()\n                };\n                console.log(\"Moving event:\", {\n                    event: conflict.title,\n                    from: conflict.startTime,\n                    to: updatedEvent.startTime\n                });\n                storage.updateTimeBlock(updatedEvent);\n            });\n            return newEvent;\n        } else {\n            // Find next available time for new event\n            console.log(\"Finding next available time for new event...\");\n            const duration = new Date(newEvent.endTime).getTime() - new Date(newEvent.startTime).getTime();\n            const lastConflict = conflicts.sort((a, b)=>new Date(b.endTime).getTime() - new Date(a.endTime).getTime())[0];\n            const newStartTime = new Date(lastConflict.endTime);\n            const newEndTime = new Date(newStartTime.getTime() + duration);\n            const rescheduledEvent = {\n                ...newEvent,\n                startTime: newStartTime.toISOString(),\n                endTime: newEndTime.toISOString()\n            };\n            console.log(\"Rescheduled new event:\", {\n                from: newEvent.startTime,\n                to: rescheduledEvent.startTime\n            });\n            return rescheduledEvent;\n        }\n    };\n    const sendMessage = async (content)=>{\n        console.log(\"=== START sendMessage ===\");\n        setIsLoading(true);\n        try {\n            // Initialize agent\n            console.log(\"Initializing agent...\");\n            const { agent, prompt, functionHandlers } = await (0,_services_chatbot__WEBPACK_IMPORTED_MODULE_1__.initializeAgent)();\n            console.log(\"Agent initialized successfully\");\n            // Format the prompt\n            const formattedPrompt = await prompt.formatMessages({\n                input: content\n            });\n            // Call agent\n            console.log(\"Calling agent...\");\n            const response = await agent.invoke(formattedPrompt);\n            console.log(\"Agent response received:\", response);\n            // Extract content\n            let messageContent = response.content;\n            // Look for schedule task\n            const codeBlockMatch = messageContent.match(/```[\\s\\S]*?schedule_task\\(([\\s\\S]*?)\\)[\\s\\S]*?```/);\n            if (codeBlockMatch) {\n                const paramsText = codeBlockMatch[1];\n                const params = {\n                    title: (paramsText.match(/title=\"([^\"]+)\"/) || [])[1],\n                    startTime: (paramsText.match(/startTime=\"([^\"]+)\"/) || [])[1],\n                    endTime: (paramsText.match(/endTime=\"([^\"]+)\"/) || [])[1],\n                    priority: (paramsText.match(/priority=\"([^\"]+)\"/) || [])[1],\n                    location: (paramsText.match(/location=\"([^\"]+)\"/) || [])[1],\n                    needsTransport: paramsText.includes(\"needsTransport=True\"),\n                    delegatable: paramsText.includes(\"delegatable=True\")\n                };\n                if (params.title && params.startTime) {\n                    const storage = _lib_storage__WEBPACK_IMPORTED_MODULE_2__.StorageService.getInstance();\n                    const existingEvents = storage.getTimeBlocks();\n                    // Handle transportation if needed\n                    let transportDetails = null;\n                    if (params.needsTransport && params.location) {\n                        const taxiService = _services_taxiService__WEBPACK_IMPORTED_MODULE_3__.TaxiService.getInstance();\n                        const estimate = await taxiService.estimateTrip(\"current_location\", params.location);\n                        if (estimate.available) {\n                            // Add buffer time for transportation\n                            const eventStart = new Date(params.startTime);\n                            eventStart.setMinutes(eventStart.getMinutes() - estimate.duration);\n                            params.startTime = eventStart.toISOString();\n                            // Get payment details\n                            const paymentDetails = await taxiService.getPaymentDetails(\"current_location\", params.location);\n                            messageContent += \"\\n\\nTransportation arranged:\\n- Taxi booked for \".concat(estimate.duration, \" minutes before event\\n- Please send \").concat(estimate.cost, \" ETH to \").concat(paymentDetails.address, \" on \").concat(paymentDetails.network, \"\\n- After payment, the taxi will be confirmed\");\n                        }\n                    }\n                    const scheduledEvent = {\n                        _id: crypto.randomUUID(),\n                        title: params.title,\n                        startTime: new Date(params.startTime).toISOString(),\n                        endTime: params.endTime ? new Date(params.endTime).toISOString() : new Date(new Date(params.startTime).getTime() + 60 * 60 * 1000).toISOString(),\n                        priority: params.priority || \"important\",\n                        location: params.location,\n                        transportDetails,\n                        delegatable: params.delegatable || false,\n                        status: \"scheduled\",\n                        created_at: new Date().toISOString(),\n                        updated_at: new Date().toISOString()\n                    };\n                    const finalEvent = handleScheduleConflict(scheduledEvent, existingEvents);\n                    storage.addTimeBlock(finalEvent);\n                    const event = new CustomEvent(\"calendarUpdate\", {\n                        detail: finalEvent\n                    });\n                    window.dispatchEvent(event);\n                    // Extract taxi booking function call\n                    const taxiMatch = messageContent.match(/```[\\s\\S]*?book_taxi\\(([\\s\\S]*?)\\)[\\s\\S]*?```/);\n                    if (taxiMatch) {\n                        const taxiParams = {\n                            pickup: (taxiMatch[1].match(/pickup=\"([^\"]+)\"/) || [])[1],\n                            destination: (taxiMatch[1].match(/destination=\"([^\"]+)\"/) || [])[1],\n                            pickupTime: (taxiMatch[1].match(/pickupTime=\"([^\"]+)\"/) || [])[1]\n                        };\n                        // Execute taxi booking\n                        const paymentDetails = await functionHandlers.book_taxi(taxiParams);\n                        if (paymentDetails.txHash) {\n                            // Verify payment\n                            const verified = await functionHandlers.verify_payment({\n                                txHash: paymentDetails.txHash\n                            });\n                            messageContent += \"\\n\\nPayment status: \".concat(verified ? \"Successful\" : \"Failed\", \"\\nTransaction hash: \").concat(paymentDetails.txHash);\n                        }\n                    }\n                }\n            }\n            // Add message to chat history\n            setMessages((prev)=>[\n                    ...prev,\n                    {\n                        content: messageContent,\n                        role: \"assistant\",\n                        timestamp: new Date().toISOString()\n                    }\n                ]);\n        } catch (error) {\n            console.error(\"Error in sendMessage:\", error);\n            setMessages((prev)=>[\n                    ...prev,\n                    {\n                        content: \"Error: \".concat(error.message),\n                        role: \"system\",\n                        timestamp: new Date().toISOString()\n                    }\n                ]);\n        } finally{\n            setIsLoading(false);\n        }\n    };\n    return {\n        messages,\n        setMessages,\n        isLoading,\n        sendMessage\n    };\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9ob29rcy91c2VDaGF0Ym90LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztnRUFFNEM7QUFDUztBQUNOO0FBQ007QUFFOUMsU0FBU0s7SUFDZCxNQUFNLENBQUNDLFVBQVVDLFlBQVksR0FBR1AsK0NBQVFBLENBQVEsRUFBRTtJQUNsRCxNQUFNLENBQUNRLFdBQVdDLGFBQWEsR0FBR1QsK0NBQVFBLENBQUM7SUFFM0MsK0NBQStDO0lBQy9DQyxnREFBU0EsQ0FBQztRQUNSLE1BQU1TLGdCQUFnQkMsYUFBYUMsT0FBTyxDQUFDO1FBQzNDLElBQUlGLGVBQWU7WUFDakJILFlBQVlNLEtBQUtDLEtBQUssQ0FBQ0o7UUFDekI7SUFDRixHQUFHLEVBQUU7SUFFTCxxREFBcUQ7SUFDckRULGdEQUFTQSxDQUFDO1FBQ1JVLGFBQWFJLE9BQU8sQ0FBQyxnQkFBZ0JGLEtBQUtHLFNBQVMsQ0FBQ1Y7SUFDdEQsR0FBRztRQUFDQTtLQUFTO0lBRWIsTUFBTVcseUJBQXlCLENBQUNDLFVBQXFCQztRQUNuREMsUUFBUUMsR0FBRyxDQUFDLHFDQUFxQztZQUMvQ0MsT0FBT0osU0FBU0ksS0FBSztZQUNyQkMsT0FBT0wsU0FBU00sU0FBUztZQUN6QkMsVUFBVVAsU0FBU08sUUFBUTtRQUM3QjtRQUNBTCxRQUFRQyxHQUFHLENBQUMsb0JBQW9CRjtRQUVoQyxtQ0FBbUM7UUFDbkMsTUFBTU8sZ0JBQWdCO1lBQ3BCLG9CQUFvQjtZQUNwQixhQUFhO1lBQ2IsVUFBVTtZQUNWLFdBQVc7UUFDYjtRQUVBLDBCQUEwQjtRQUMxQixNQUFNQyxZQUFZUixlQUFlUyxNQUFNLENBQUNDLENBQUFBO1lBQ3RDLE1BQU1DLFdBQVcsSUFBSUMsS0FBS2IsU0FBU00sU0FBUztZQUM1QyxNQUFNUSxTQUFTLElBQUlELEtBQUtiLFNBQVNlLE9BQU87WUFDeEMsTUFBTUMsYUFBYSxJQUFJSCxLQUFLRixNQUFNTCxTQUFTO1lBQzNDLE1BQU1XLFdBQVcsSUFBSUos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Q0FDckRGLFFBQVF4QixlQUFld0IsTUFBTTs0QkFDL0I7NEJBRUF6QyxrQkFBa0IsdUJBQ1ppQixPQURtQ3lCLFdBQVcsZUFBZSxVQUFTLHdCQUNoRCxPQUF0QnpCLGVBQWV3QixNQUFNO3dCQUM3QjtvQkFDRjtnQkFDRjtZQUNGO1lBRUEsOEJBQThCO1lBQzlCL0csWUFBWWtILENBQUFBLE9BQVE7dUJBQUlBO29CQUFNO3dCQUM1QnJELFNBQVNTO3dCQUNUNkMsTUFBTTt3QkFDTkMsV0FBVyxJQUFJNUYsT0FBTzJCLFdBQVc7b0JBQ25DO2lCQUFFO1FBRUosRUFBRSxPQUFPa0UsT0FBTztZQUNkeEcsUUFBUXdHLEtBQUssQ0FBQyx5QkFBeUJBO1lBQ3ZDckgsWUFBWWtILENBQUFBLE9BQVE7dUJBQUlBO29CQUFNO3dCQUM1QnJELFNBQVMsVUFBd0IsT0FBZHdELE1BQU1DLE9BQU87d0JBQ2hDSCxNQUFNO3dCQUNOQyxXQUFXLElBQUk1RixPQUFPMkIsV0FBVztvQkFDbkM7aUJBQUU7UUFDSixTQUFVO1lBQ1JqRCxhQUFhO1FBQ2Y7SUFDRjtJQUVBLE9BQU87UUFDTEg7UUFDQUM7UUFDQUM7UUFDQTJEO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9zcmMvaG9va3MvdXNlQ2hhdGJvdC50cz9kNDZmIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50JztcblxuaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IGluaXRpYWxpemVBZ2VudCB9IGZyb20gJ0Avc2VydmljZXMvY2hhdGJvdCc7XG5pbXBvcnQgeyBTdG9yYWdlU2VydmljZSB9IGZyb20gJ0AvbGliL3N0b3JhZ2UnO1xuaW1wb3J0IHsgVGF4aVNlcnZpY2UgfSBmcm9tICdAL3NlcnZpY2VzL3RheGlTZXJ2aWNlJztcblxuZXhwb3J0IGZ1bmN0aW9uIHVzZUNoYXRib3QoKSB7XG4gIGNvbnN0IFttZXNzYWdlcywgc2V0TWVzc2FnZXNdID0gdXNlU3RhdGU8YW55W10+KFtdKTtcbiAgY29uc3QgW2lzTG9hZGluZywgc2V0SXNMb2FkaW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcblxuICAvLyBMb2FkIGNoYXQgaGlzdG9yeSBmcm9tIGxvY2FsU3RvcmFnZSBvbiBtb3VudFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IHNhdmVkTWVzc2FnZXMgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY2hhdF9oaXN0b3J5Jyk7XG4gICAgaWYgKHNhdmVkTWVzc2FnZXMpIHtcbiAgICAgIHNldE1lc3NhZ2VzKEpTT04ucGFyc2Uoc2F2ZWRNZXNzYWdlcykpO1xuICAgIH1cbiAgfSwgW10pO1xuXG4gIC8vIFNhdmUgbWVzc2FnZXMgdG8gbG9jYWxTdG9yYWdlIHdoZW5ldmVyIHRoZXkgY2hhbmdlXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2NoYXRfaGlzdG9yeScsIEpTT04uc3RyaW5naWZ5KG1lc3NhZ2VzKSk7XG4gIH0sIFttZXNzYWdlc10pO1xuXG4gIGNvbnN0IGhhbmRsZVNjaGVkdWxlQ29uZmxpY3QgPSAobmV3RXZlbnQ6IFRpbWVCbG9jaywgZXhpc3RpbmdFdmVudHM6IFRpbWVCbG9ja1tdKSA9PiB7XG4gICAgY29uc29sZS5sb2coJ0NoZWNraW5nIGNvbmZsaWN0cyBmb3IgbmV3IGV2ZW50OicsIHtcbiAgICAgIHRpdGxlOiBuZXdFdmVudC50aXRsZSxcbiAgICAgIHN0YXJ0OiBuZXdFdmVudC5zdGFydFRpbWUsXG4gICAgICBwcmlvcml0eTogbmV3RXZlbnQucHJpb3JpdHlcbiAgICB9KTtcbiAgICBjb25zb2xlLmxvZygnRXhpc3RpbmcgZXZlbnRzOicsIGV4aXN0aW5nRXZlbnRzKTtcblxuICAgIC8vIFNvcnQgZXhpc3RpbmcgZXZlbnRzIGJ5IHByaW9yaXR5XG4gICAgY29uc3QgcHJpb3JpdHlPcmRlciA9IHtcbiAgICAgICd1cmdlbnQtaW1wb3J0YW50JzogMyxcbiAgICAgICdpbXBvcnRhbnQnOiAyLFxuICAgICAgJ3VyZ2VudCc6IDEsXG4gICAgICAnbmVpdGhlcic6IDBcbiAgICB9O1xuXG4gICAgLy8gRmluZCBjb25mbGljdGluZyBldmVudHNcbiAgICBjb25zdCBjb25mbGljdHMgPSBleGlzdGluZ0V2ZW50cy5maWx0ZXIoZXZlbnQgPT4ge1xuICAgICAgY29uc3QgbmV3U3RhcnQgPSBuZXcgRGF0ZShuZXdFdmVudC5zdGFydFRpbWUpO1xuICAgICAgY29uc3QgbmV3RW5kID0gbmV3IERhdGUobmV3RXZlbnQuZW5kVGltZSk7XG4gICAgICBjb25zdCBldmVudFN0YXJ0ID0gbmV3IERhdGUoZXZlbnQuc3RhcnRUaW1lKTtcbiAgICAgIGNvbnN0IGV2ZW50RW5kID0gbmV3IERhdGUoZXZlbnQuZW5kVGltZSk7XG4gICAgICBcbiAgICAgIGNvbnN0IGhhc0NvbmZsaWN0ID0gKFxuICAgICAgICAobmV3U3RhcnQgPj0gZXZlbnRTdGFydCAmJiBuZXdTdGFydCA8IGV2ZW50RW5kKSB8fFxuICAgICAgICAobmV3RW5kID4gZXZlbnRTdGFydCAmJiBuZXdFbmQgPD0gZXZlbnRFbmQpIHx8XG4gICAgICAgIChuZXdTdGFydCA8PSBldmVudFN0YXJ0ICYmIG5ld0VuZCA+PSBldmVudEVuZClcbiAgICAgICk7XG5cbiAgICAgIGlmIChoYXNDb25mbGljdCkge1xuICAgICAgICBjb25zb2xlLmxvZygnRm91bmQgY29uZmxpY3Q6Jywge1xuICAgICAgICAgIGV4aXN0aW5nRXZlbnQ6IGV2ZW50LnRpdGxlLFxuICAgICAgICAgIGV4aXN0aW5nUHJpb3JpdHk6IGV2ZW50LnByaW9yaXR5LFxuICAgICAgICAgIG5ld0V2ZW50OiBuZXdFdmVudC50aXRsZSxcbiAgICAgICAgICBuZXdQcmlvcml0eTogbmV3RXZlbnQucHJpb3JpdHlcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiBoYXNDb25mbGljdDtcbiAgICB9KTtcblxuICAgIGlmIChjb25mbGljdHMubGVuZ3RoID09PSAwKSB7XG4gICAgICBjb25zb2xlLmxvZygnTm8gY29uZmxpY3RzIGZvdW5kJyk7XG4gICAgICByZXR1cm4gbmV3RXZlbnQ7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgaWYgbmV3IGV2ZW50IGhhcyBoaWdoZXIgcHJpb3JpdHlcbiAgICBjb25zdCBuZXdQcmlvcml0eVNjb3JlID0gcHJpb3JpdHlPcmRlcltuZXdFdmVudC5wcmlvcml0eV07XG4gICAgY29uc3QgaGlnaGVzdENvbmZsaWN0U2NvcmUgPSBNYXRoLm1heChcbiAgICAgIC4uLmNvbmZsaWN0cy5tYXAoZSA9PiBwcmlvcml0eU9yZGVyW2UucHJpb3JpdHldKVxuICAgICk7XG5cbiAgICBjb25zb2xlLmxvZygnUHJpb3JpdHkgY29tcGFyaXNvbjonLCB7XG4gICAgICBuZXdFdmVudFNjb3JlOiBuZXdQcmlvcml0eVNjb3JlLFxuICAgICAgaGlnaGVzdENvbmZsaWN0U2NvcmUsXG4gICAgICB3aWxsUmVzY2hlZHVsZUNvbmZsaWN0czogbmV3UHJpb3JpdHlTY29yZSA+IGhpZ2hlc3RDb25mbGljdFNjb3JlXG4gICAgfSk7XG5cbiAgICBpZiAobmV3UHJpb3JpdHlTY29yZSA+IGhpZ2hlc3RDb25mbGljdFNjb3JlKSB7XG4gICAgICAvLyBNb3ZlIGNvbmZsaWN0aW5nIGV2ZW50c1xuICAgICAgY29uc29sZS5sb2coJ01vdmluZyBjb25mbGljdGluZyBldmVudHMuLi4nKTtcbiAgICAgIGNvbnN0IHN0b3JhZ2UgPSBTdG9yYWdlU2VydmljZS5nZXRJbnN0YW5jZSgpO1xuICAgICAgY29uZmxpY3RzLmZvckVhY2goY29uZmxpY3QgPT4ge1xuICAgICAgICAvLyBNb3ZlIHRvIG5leHQgYXZhaWxhYmxlIHRpbWVcbiAgICAgICAgY29uc3QgZHVyYXRpb24gPSBuZXcgRGF0ZShjb25mbGljdC5lbmRUaW1lKS5nZXRUaW1lKCkgLSBuZXcgRGF0ZShjb25mbGljdC5zdGFydFRpbWUpLmdldFRpbWUoKTtcbiAgICAgICAgY29uc3QgbmV3U3RhcnRUaW1lID0gbmV3IERhdGUobmV3RXZlbnQuZW5kVGltZSk7XG4gICAgICAgIGNvbnN0IG5ld0VuZFRpbWUgPSBuZXcgRGF0ZShuZXdTdGFydFRpbWUuZ2V0VGltZSgpICsgZHVyYXRpb24pO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgdXBkYXRlZEV2ZW50ID0ge1xuICAgICAgICAgIC4uLmNvbmZsaWN0LFxuICAgICAgICAgIHN0YXJ0VGltZTogbmV3U3RhcnRUaW1lLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgZW5kVGltZTogbmV3RW5kVGltZS50b0lTT1N0cmluZygpXG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICBjb25zb2xlLmxvZygnTW92aW5nIGV2ZW50OicsIHtcbiAgICAgICAgICBldmVudDogY29uZmxpY3QudGl0bGUsXG4gICAgICAgICAgZnJvbTogY29uZmxpY3Quc3RhcnRUaW1lLFxuICAgICAgICAgIHRvOiB1cGRhdGVkRXZlbnQuc3RhcnRUaW1lXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgc3RvcmFnZS51cGRhdGVUaW1lQmxvY2sodXBkYXRlZEV2ZW50KTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIG5ld0V2ZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBGaW5kIG5leHQgYXZhaWxhYmxlIHRpbWUgZm9yIG5ldyBldmVudFxuICAgICAgY29uc29sZS5sb2coJ0ZpbmRpbmcgbmV4dCBhdmFpbGFibGUgdGltZSBmb3IgbmV3IGV2ZW50Li4uJyk7XG4gICAgICBjb25zdCBkdXJhdGlvbiA9IG5ldyBEYXRlKG5ld0V2ZW50LmVuZFRpbWUpLmdldFRpbWUoKSAtIG5ldyBEYXRlKG5ld0V2ZW50LnN0YXJ0VGltZSkuZ2V0VGltZSgpO1xuICAgICAgY29uc3QgbGFzdENvbmZsaWN0ID0gY29uZmxpY3RzLnNvcnQoKGEsIGIpID0+IFxuICAgICAgICBuZXcgRGF0ZShiLmVuZFRpbWUpLmdldFRpbWUoKSAtIG5ldyBEYXRlKGEuZW5kVGltZSkuZ2V0VGltZSgpXG4gICAgICApWzBdO1xuICAgICAgXG4gICAgICBjb25zdCBuZXdTdGFydFRpbWUgPSBuZXcgRGF0ZShsYXN0Q29uZmxpY3QuZW5kVGltZSk7XG4gICAgICBjb25zdCBuZXdFbmRUaW1lID0gbmV3IERhdGUobmV3U3RhcnRUaW1lLmdldFRpbWUoKSArIGR1cmF0aW9uKTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVzY2hlZHVsZWRFdmVudCA9IHtcbiAgICAgICAgLi4ubmV3RXZlbnQsXG4gICAgICAgIHN0YXJ0VGltZTogbmV3U3RhcnRUaW1lLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIGVuZFRpbWU6IG5ld0VuZFRpbWUudG9JU09TdHJpbmcoKVxuICAgICAgfTtcblxuICAgICAgY29uc29sZS5sb2coJ1Jlc2NoZWR1bGVkIG5ldyBldmVudDonLCB7XG4gICAgICAgIGZyb206IG5ld0V2ZW50LnN0YXJ0VGltZSxcbiAgICAgICAgdG86IHJlc2NoZWR1bGVkRXZlbnQuc3RhcnRUaW1lXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgcmV0dXJuIHJlc2NoZWR1bGVkRXZlbnQ7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IHNlbmRNZXNzYWdlID0gYXN5bmMgKGNvbnRlbnQ6IHN0cmluZykgPT4ge1xuICAgIGNvbnNvbGUubG9nKCc9PT0gU1RBUlQgc2VuZE1lc3NhZ2UgPT09Jyk7XG4gICAgc2V0SXNMb2FkaW5nKHRydWUpO1xuXG4gICAgdHJ5IHtcbiAgICAgIC8vIEluaXRpYWxpemUgYWdlbnRcbiAgICAgIGNvbnNvbGUubG9nKCdJbml0aWFsaXppbmcgYWdlbnQuLi4nKTtcbiAgICAgIGNvbnN0IHsgYWdlbnQsIHByb21wdCwgZnVuY3Rpb25IYW5kbGVycyB9ID0gYXdhaXQgaW5pdGlhbGl6ZUFnZW50KCk7XG4gICAgICBjb25zb2xlLmxvZygnQWdlbnQgaW5pdGlhbGl6ZWQgc3VjY2Vzc2Z1bGx5Jyk7XG5cbiAgICAgIC8vIEZvcm1hdCB0aGUgcHJvbXB0XG4gICAgICBjb25zdCBmb3JtYXR0ZWRQcm9tcHQgPSBhd2FpdCBwcm9tcHQuZm9ybWF0TWVzc2FnZXMoe1xuICAgICAgICBpbnB1dDogY29udGVudFxuICAgICAgfSk7XG5cbiAgICAgIC8vIENhbGwgYWdlbnRcbiAgICAgIGNvbnNvbGUubG9nKCdDYWxsaW5nIGFnZW50Li4uJyk7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGFnZW50Lmludm9rZShmb3JtYXR0ZWRQcm9tcHQpO1xuICAgICAgY29uc29sZS5sb2coJ0FnZW50IHJlc3BvbnNlIHJlY2VpdmVkOicsIHJlc3BvbnNlKTtcblxuICAgICAgLy8gRXh0cmFjdCBjb250ZW50XG4gICAgICBsZXQgbWVzc2FnZUNvbnRlbnQgPSByZXNwb25zZS5jb250ZW50O1xuXG4gICAgICAvLyBMb29rIGZvciBzY2hlZHVsZSB0YXNrXG4gICAgICBjb25zdCBjb2RlQmxvY2tNYXRjaCA9IG1lc3NhZ2VDb250ZW50Lm1hdGNoKC9gYGBbXFxzXFxTXSo/c2NoZWR1bGVfdGFza1xcKChbXFxzXFxTXSo/KVxcKVtcXHNcXFNdKj9gYGAvKTtcbiAgICAgIGlmIChjb2RlQmxvY2tNYXRjaCkge1xuICAgICAgICBjb25zdCBwYXJhbXNUZXh0ID0gY29kZUJsb2NrTWF0Y2hbMV07XG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IHtcbiAgICAgICAgICB0aXRsZTogKHBhcmFtc1RleHQubWF0Y2goL3RpdGxlPVwiKFteXCJdKylcIi8pIHx8IFtdKVsxXSxcbiAgICAgICAgICBzdGFydFRpbWU6IChwYXJhbXNUZXh0Lm1hdGNoKC9zdGFydFRpbWU9XCIoW15cIl0rKVwiLykgfHwgW10pWzFdLFxuICAgICAgICAgIGVuZFRpbWU6IChwYXJhbXNUZXh0Lm1hdGNoKC9lbmRUaW1lPVwiKFteXCJdKylcIi8pIHx8IFtdKVsxXSxcbiAgICAgICAgICBwcmlvcml0eTogKHBhcmFtc1RleHQubWF0Y2goL3ByaW9yaXR5PVwiKFteXCJdKylcIi8pIHx8IFtdKVsxXSxcbiAgICAgICAgICBsb2NhdGlvbjogKHBhcmFtc1RleHQubWF0Y2goL2xvY2F0aW9uPVwiKFteXCJdKylcIi8pIHx8IFtdKVsxXSxcbiAgICAgICAgICBuZWVkc1RyYW5zcG9ydDogcGFyYW1zVGV4dC5pbmNsdWRlcygnbmVlZHNUcmFuc3BvcnQ9VHJ1ZScpLFxuICAgICAgICAgIGRlbGVnYXRhYmxlOiBwYXJhbXNUZXh0LmluY2x1ZGVzKCdkZWxlZ2F0YWJsZT1UcnVlJylcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAocGFyYW1zLnRpdGxlICYmIHBhcmFtcy5zdGFydFRpbWUpIHtcbiAgICAgICAgICBjb25zdCBzdG9yYWdlID0gU3RvcmFnZVNlcnZpY2UuZ2V0SW5zdGFuY2UoKTtcbiAgICAgICAgICBjb25zdCBleGlzdGluZ0V2ZW50cyA9IHN0b3JhZ2UuZ2V0VGltZUJsb2NrcygpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIEhhbmRsZSB0cmFuc3BvcnRhdGlvbiBpZiBuZWVkZWRcbiAgICAgICAgICBsZXQgdHJhbnNwb3J0RGV0YWlscyA9IG51bGw7XG4gICAgICAgICAgaWYgKHBhcmFtcy5uZWVkc1RyYW5zcG9ydCAmJiBwYXJhbXMubG9jYXRpb24pIHtcbiAgICAgICAgICAgIGNvbnN0IHRheGlTZXJ2aWNlID0gVGF4aVNlcnZpY2UuZ2V0SW5zdGFuY2UoKTtcbiAgICAgICAgICAgIGNvbnN0IGVzdGltYXRlID0gYXdhaXQgdGF4aVNlcnZpY2UuZXN0aW1hdGVUcmlwKCdjdXJyZW50X2xvY2F0aW9uJywgcGFyYW1zLmxvY2F0aW9uKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGVzdGltYXRlLmF2YWlsYWJsZSkge1xuICAgICAgICAgICAgICAvLyBBZGQgYnVmZmVyIHRpbWUgZm9yIHRyYW5zcG9ydGF0aW9uXG4gICAgICAgICAgICAgIGNvbnN0IGV2ZW50U3RhcnQgPSBuZXcgRGF0ZShwYXJhbXMuc3RhcnRUaW1lKTtcbiAgICAgICAgICAgICAgZXZlbnRTdGFydC5zZXRNaW51dGVzKGV2ZW50U3RhcnQuZ2V0TWludXRlcygpIC0gZXN0aW1hdGUuZHVyYXRpb24pO1xuICAgICAgICAgICAgICBwYXJhbXMuc3RhcnRUaW1lID0gZXZlbnRTdGFydC50b0lTT1N0cmluZygpO1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gR2V0IHBheW1lbnQgZGV0YWlsc1xuICAgICAgICAgICAgICBjb25zdCBwYXltZW50RGV0YWlscyA9IGF3YWl0IHRheGlTZXJ2aWNlLmdldFBheW1lbnREZXRhaWxzKCdjdXJyZW50X2xvY2F0aW9uJywgcGFyYW1zLmxvY2F0aW9uKTtcbiAgICAgICAgICAgICAgbWVzc2FnZUNvbnRlbnQgKz0gYFxcblxcblRyYW5zcG9ydGF0aW9uIGFycmFuZ2VkOlxuLSBUYXhpIGJvb2tlZCBmb3IgJHtlc3RpbWF0ZS5kdXJhdGlvbn0gbWludXRlcyBiZWZvcmUgZXZlbnRcbi0gUGxlYXNlIHNlbmQgJHtlc3RpbWF0ZS5jb3N0fSBFVEggdG8gJHtwYXltZW50RGV0YWlscy5hZGRyZXNzfSBvbiAke3BheW1lbnREZXRhaWxzLm5ldHdvcmt9XG4tIEFmdGVyIHBheW1lbnQsIHRoZSB0YXhpIHdpbGwgYmUgY29uZmlybWVkYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb25zdCBzY2hlZHVsZWRFdmVudCA9IHtcbiAgICAgICAgICAgIF9pZDogY3J5cHRvLnJhbmRvbVVVSUQoKSxcbiAgICAgICAgICAgIHRpdGxlOiBwYXJhbXMudGl0bGUsXG4gICAgICAgICAgICBzdGFydFRpbWU6IG5ldyBEYXRlKHBhcmFtcy5zdGFydFRpbWUpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICBlbmRUaW1lOiBwYXJhbXMuZW5kVGltZSA/IG5ldyBEYXRlKHBhcmFtcy5lbmRUaW1lKS50b0lTT1N0cmluZygpIDogXG4gICAgICAgICAgICAgIG5ldyBEYXRlKG5ldyBEYXRlKHBhcmFtcy5zdGFydFRpbWUpLmdldFRpbWUoKSArIDYwICogNjAgKiAxMDAwKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgcHJpb3JpdHk6IHBhcmFtcy5wcmlvcml0eSB8fCBcImltcG9ydGFudFwiLFxuICAgICAgICAgICAgbG9jYXRpb246IHBhcmFtcy5sb2NhdGlvbixcbiAgICAgICAgICAgIHRyYW5zcG9ydERldGFpbHMsXG4gICAgICAgICAgICBkZWxlZ2F0YWJsZTogcGFyYW1zLmRlbGVnYXRhYmxlIHx8IGZhbHNlLFxuICAgICAgICAgICAgc3RhdHVzOiAnc2NoZWR1bGVkJyxcbiAgICAgICAgICAgIGNyZWF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgICAgIH07XG5cbiAgICAgICAgICBjb25zdCBmaW5hbEV2ZW50ID0gaGFuZGxlU2NoZWR1bGVDb25mbGljdChzY2hlZHVsZWRFdmVudCwgZXhpc3RpbmdFdmVudHMpO1xuICAgICAgICAgIHN0b3JhZ2UuYWRkVGltZUJsb2NrKGZpbmFsRXZlbnQpO1xuXG4gICAgICAgICAgY29uc3QgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ2NhbGVuZGFyVXBkYXRlJywge1xuICAgICAgICAgICAgZGV0YWlsOiBmaW5hbEV2ZW50XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuXG4gICAgICAgICAgLy8gRXh0cmFjdCB0YXhpIGJvb2tpbmcgZnVuY3Rpb24gY2FsbFxuICAgICAgICAgIGNvbnN0IHRheGlNYXRjaCA9IG1lc3NhZ2VDb250ZW50Lm1hdGNoKC9gYGBbXFxzXFxTXSo/Ym9va190YXhpXFwoKFtcXHNcXFNdKj8pXFwpW1xcc1xcU10qP2BgYC8pO1xuICAgICAgICAgIGlmICh0YXhpTWF0Y2gpIHtcbiAgICAgICAgICAgIGNvbnN0IHRheGlQYXJhbXMgPSB7XG4gICAgICAgICAgICAgIHBpY2t1cDogKHRheGlNYXRjaFsxXS5tYXRjaCgvcGlja3VwPVwiKFteXCJdKylcIi8pIHx8IFtdKVsxXSxcbiAgICAgICAgICAgICAgZGVzdGluYXRpb246ICh0YXhpTWF0Y2hbMV0ubWF0Y2goL2Rlc3RpbmF0aW9uPVwiKFteXCJdKylcIi8pIHx8IFtdKVsxXSxcbiAgICAgICAgICAgICAgcGlja3VwVGltZTogKHRheGlNYXRjaFsxXS5tYXRjaCgvcGlja3VwVGltZT1cIihbXlwiXSspXCIvKSB8fCBbXSlbMV1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8vIEV4ZWN1dGUgdGF4aSBib29raW5nXG4gICAgICAgICAgICBjb25zdCBwYXltZW50RGV0YWlscyA9IGF3YWl0IGZ1bmN0aW9uSGFuZGxlcnMuYm9va190YXhpKHRheGlQYXJhbXMpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAocGF5bWVudERldGFpbHMudHhIYXNoKSB7XG4gICAgICAgICAgICAgIC8vIFZlcmlmeSBwYXltZW50XG4gICAgICAgICAgICAgIGNvbnN0IHZlcmlmaWVkID0gYXdhaXQgZnVuY3Rpb25IYW5kbGVycy52ZXJpZnlfcGF5bWVudCh7XG4gICAgICAgICAgICAgICAgdHhIYXNoOiBwYXltZW50RGV0YWlscy50eEhhc2hcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICBtZXNzYWdlQ29udGVudCArPSBgXFxuXFxuUGF5bWVudCBzdGF0dXM6ICR7dmVyaWZpZWQgPyAnU3VjY2Vzc2Z1bCcgOiAnRmFpbGVkJ31cblRyYW5zYWN0aW9uIGhhc2g6ICR7cGF5bWVudERldGFpbHMudHhIYXNofWA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIEFkZCBtZXNzYWdlIHRvIGNoYXQgaGlzdG9yeVxuICAgICAgc2V0TWVzc2FnZXMocHJldiA9PiBbLi4ucHJldiwge1xuICAgICAgICBjb250ZW50OiBtZXNzYWdlQ29udGVudCxcbiAgICAgICAgcm9sZTogJ2Fzc2lzdGFudCcsXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICB9XSk7XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gc2VuZE1lc3NhZ2U6JywgZXJyb3IpO1xuICAgICAgc2V0TWVzc2FnZXMocHJldiA9PiBbLi4ucHJldiwge1xuICAgICAgICBjb250ZW50OiBgRXJyb3I6ICR7ZXJyb3IubWVzc2FnZX1gLFxuICAgICAgICByb2xlOiAnc3lzdGVtJyxcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgIH1dKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBtZXNzYWdlcyxcbiAgICBzZXRNZXNzYWdlcyxcbiAgICBpc0xvYWRpbmcsXG4gICAgc2VuZE1lc3NhZ2VcbiAgfTtcbn0gIl0sIm5hbWVzIjpbInVzZVN0YXRlIiwidXNlRWZmZWN0IiwiaW5pdGlhbGl6ZUFnZW50IiwiU3RvcmFnZVNlcnZpY2UiLCJUYXhpU2VydmljZSIsInVzZUNoYXRib3QiLCJtZXNzYWdlcyIsInNldE1lc3NhZ2VzIiwiaXNMb2FkaW5nIiwic2V0SXNMb2FkaW5nIiwic2F2ZWRNZXNzYWdlcyIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJKU09OIiwicGFyc2UiLCJzZXRJdGVtIiwic3RyaW5naWZ5IiwiaGFuZGxlU2NoZWR1bGVDb25mbGljdCIsIm5ld0V2ZW50IiwiZXhpc3RpbmdFdmVudHMiLCJjb25zb2xlIiwibG9nIiwidGl0bGUiLCJzdGFydCIsInN0YXJ0VGltZSIsInByaW9yaXR5IiwicHJpb3JpdHlPcmRlciIsImNvbmZsaWN0cyIsImZpbHRlciIsImV2ZW50IiwibmV3U3RhcnQiLCJEYXRlIiwibmV3RW5kIiwiZW5kVGltZSIsImV2ZW50U3RhcnQiLCJldmVudEVuZCIsImhhc0NvbmZsaWN0IiwiZXhpc3RpbmdFdmVudCIsImV4aXN0aW5nUHJpb3JpdHkiLCJuZXdQcmlvcml0eSIsImxlbmd0aCIsIm5ld1ByaW9yaXR5U2NvcmUiLCJoaWdoZXN0Q29uZmxpY3RTY29yZSIsIk1hdGgiLCJtYXgiLCJtYXAiLCJlIiwibmV3RXZlbnRTY29yZSIsIndpbGxSZXNjaGVkdWxlQ29uZmxpY3RzIiwic3RvcmFnZSIsImdldEluc3RhbmNlIiwiZm9yRWFjaCIsImNvbmZsaWN0IiwiZHVyYXRpb24iLCJnZXRUaW1lIiwibmV3U3RhcnRUaW1lIiwibmV3RW5kVGltZSIsInVwZGF0ZWRFdmVudCIsInRvSVNPU3RyaW5nIiwiZnJvbSIsInRvIiwidXBkYXRlVGltZUJsb2NrIiwibGFzdENvbmZsaWN0Iiwic29ydCIsImEiLCJiIiwicmVzY2hlZHVsZWRFdmVudCIsInNlbmRNZXNzYWdlIiwiY29udGVudCIsImFnZW50IiwicHJvbXB0IiwiZnVuY3Rpb25IYW5kbGVycyIsImZvcm1hdHRlZFByb21wdCIsImZvcm1hdE1lc3NhZ2VzIiwiaW5wdXQiLCJyZXNwb25zZSIsImludm9rZSIsIm1lc3NhZ2VDb250ZW50IiwiY29kZUJsb2NrTWF0Y2giLCJtYXRjaCIsInBhcmFtc1RleHQiLCJwYXJhbXMiLCJsb2NhdGlvbiIsIm5lZWRzVHJhbnNwb3J0IiwiaW5jbHVkZXMiLCJkZWxlZ2F0YWJsZSIsImdldFRpbWVCbG9ja3MiLCJ0cmFuc3BvcnREZXRhaWxzIiwidGF4aVNlcnZpY2UiLCJlc3RpbWF0ZSIsImVzdGltYXRlVHJpcCIsImF2YWlsYWJsZSIsInNldE1pbnV0ZXMiLCJnZXRNaW51dGVzIiwicGF5bWVudERldGFpbHMiLCJnZXRQYXltZW50RGV0YWlscyIsImNvc3QiLCJhZGRyZXNzIiwibmV0d29yayIsInNjaGVkdWxlZEV2ZW50IiwiX2lkIiwiY3J5cHRvIiwicmFuZG9tVVVJRCIsInN0YXR1cyIsImNyZWF0ZWRfYXQiLCJ1cGRhdGVkX2F0IiwiZmluYWxFdmVudCIsImFkZFRpbWVCbG9jayIsIkN1c3RvbUV2ZW50IiwiZGV0YWlsIiwid2luZG93IiwiZGlzcGF0Y2hFdmVudCIsInRheGlNYXRjaCIsInRheGlQYXJhbXMiLCJwaWNrdXAiLCJkZXN0aW5hdGlvbiIsInBpY2t1cFRpbWUiLCJib29rX3RheGkiLCJ0eEhhc2giLCJ2ZXJpZmllZCIsInZlcmlmeV9wYXltZW50IiwicHJldiIsInJvbGUiLCJ0aW1lc3RhbXAiLCJlcnJvciIsIm1lc3NhZ2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/hooks/useChatbot.ts\n"));

/***/ })

});