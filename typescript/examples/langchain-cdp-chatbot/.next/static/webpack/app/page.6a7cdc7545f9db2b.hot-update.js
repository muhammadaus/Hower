"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/page",{

/***/ "(app-pages-browser)/./src/components/Chat.tsx":
/*!*********************************!*\
  !*** ./src/components/Chat.tsx ***!
  \*********************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/../../../node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/../../../node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_storage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/storage */ \"(app-pages-browser)/./src/lib/storage.ts\");\n/* harmony import */ var _hooks_useChatbot__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/hooks/useChatbot */ \"(app-pages-browser)/./src/hooks/useChatbot.ts\");\n/* harmony import */ var _ChatMessage__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./ChatMessage */ \"(app-pages-browser)/./src/components/ChatMessage.tsx\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \nvar _s = $RefreshSig$();\n\n\n\n\nconst Chat = ()=>{\n    _s();\n    const [inputValue, setInputValue] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const { messages, isLoading, sendMessage } = (0,_hooks_useChatbot__WEBPACK_IMPORTED_MODULE_3__.useChatbot)();\n    // Load chat history from localStorage on mount\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const savedMessages = localStorage.getItem(\"chat_history\");\n        if (savedMessages) {\n            const parsedMessages = JSON.parse(savedMessages);\n            setMessages(parsedMessages);\n        }\n    }, []);\n    // Save messages to localStorage whenever they change\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        localStorage.setItem(\"chat_history\", JSON.stringify(messages));\n    }, [\n        messages\n    ]);\n    const handleSubmit = async (e)=>{\n        e.preventDefault();\n        if (!inputValue.trim()) return;\n        const userMessage = {\n            content: inputValue,\n            role: \"user\",\n            timestamp: new Date().toISOString()\n        };\n        setMessages((prev)=>[\n                ...prev,\n                userMessage\n            ]);\n        setInputValue(\"\");\n        await sendMessage(inputValue);\n    };\n    const debugChat = ()=>{\n        const storage = _lib_storage__WEBPACK_IMPORTED_MODULE_2__.StorageService.getInstance();\n        console.log(\"Chat Debug:\");\n        console.log(\"Storage blocks:\", storage.getTimeBlocks());\n        console.log(\"Raw localStorage:\", localStorage.getItem(\"calendar_data\"));\n    };\n    const testAddEvent = ()=>{\n        const testEvent = {\n            _id: \"test-\".concat(Date.now()),\n            title: \"Test Event\",\n            startTime: new Date().toISOString(),\n            endTime: new Date().toISOString(),\n            priority: \"urgent-important\",\n            delegatable: false,\n            status: \"scheduled\",\n            created_at: new Date().toISOString(),\n            updated_at: new Date().toISOString()\n        };\n        const storage = _lib_storage__WEBPACK_IMPORTED_MODULE_2__.StorageService.getInstance();\n        console.log(\"Test: Adding event\");\n        storage.addTimeBlock(testEvent);\n        console.log(\"Test: Event added\");\n        const event = new CustomEvent(\"calendarUpdate\", {\n            detail: testEvent\n        });\n        window.dispatchEvent(event);\n        console.log(\"Test: Event dispatched\");\n    };\n    const testDirectAdd = ()=>{\n        const testEvent = {\n            _id: \"direct-\".concat(Date.now()),\n            title: \"Direct Test Event\",\n            startTime: new Date().toISOString(),\n            endTime: new Date().toISOString(),\n            priority: \"urgent-important\",\n            delegatable: false,\n            status: \"scheduled\",\n            created_at: new Date().toISOString(),\n            updated_at: new Date().toISOString()\n        };\n        const storage = _lib_storage__WEBPACK_IMPORTED_MODULE_2__.StorageService.getInstance();\n        console.log(\"Direct Test: Before adding:\", storage.getTimeBlocks());\n        storage.addTimeBlock(testEvent);\n        console.log(\"Direct Test: After adding:\", storage.getTimeBlocks());\n        const event = new CustomEvent(\"calendarUpdate\", {\n            detail: testEvent\n        });\n        window.dispatchEvent(event);\n    };\n    const testSendMessage = async ()=>{\n        try {\n            console.log(\"=== START testSendMessage ===\");\n            await sendMessage(\"can you add one urgent and important event at 2pm at 11th february for one hour?\");\n            console.log(\"=== END testSendMessage ===\");\n        } catch (error) {\n            console.error(\"Error in testSendMessage:\", error);\n        }\n    };\n    const testAPI = async ()=>{\n        console.log(\"Testing API route...\");\n        const response = await fetch(\"/api/test\");\n        console.log(\"Test API response:\", await response.text());\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"flex flex-col h-full bg-gray-50\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"bg-white shadow-sm px-6 py-4 border-b\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h1\", {\n                        className: \"text-xl font-semibold text-gray-800\",\n                        children: \"AI Assistant\"\n                    }, void 0, false, {\n                        fileName: \"/Users/muhammadaushijri/Desktop/git/Hower/typescript/examples/langchain-cdp-chatbot/src/components/Chat.tsx\",\n                        lineNumber: 119,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        className: \"text-sm text-gray-500\",\n                        children: \"Ask me to schedule events for you\"\n                    }, void 0, false, {\n                        fileName: \"/Users/muhammadaushijri/Desktop/git/Hower/typescript/examples/langchain-cdp-chatbot/src/components/Chat.tsx\",\n                        lineNumber: 120,\n                        columnNumber: 9\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/muhammadaushijri/Desktop/git/Hower/typescript/examples/langchain-cdp-chatbot/src/components/Chat.tsx\",\n                lineNumber: 118,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex-1 overflow-y-auto p-6 space-y-4\",\n                children: [\n                    messages.length === 0 ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"text-center text-gray-500 mt-8\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                children: \"\\uD83D\\uDC4B Hello! I can help you schedule events and arrange transportation.\"\n                            }, void 0, false, {\n                                fileName: \"/Users/muhammadaushijri/Desktop/git/Hower/typescript/examples/langchain-cdp-chatbot/src/components/Chat.tsx\",\n                                lineNumber: 127,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                className: \"text-sm mt-2\",\n                                children: 'Try saying: \"Schedule an urgent meeting tomorrow at 2pm\"'\n                            }, void 0, false, {\n                                fileName: \"/Users/muhammadaushijri/Desktop/git/Hower/typescript/examples/langchain-cdp-chatbot/src/components/Chat.tsx\",\n                                lineNumber: 128,\n                                columnNumber: 13\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/muhammadaushijri/Desktop/git/Hower/typescript/examples/langchain-cdp-chatbot/src/components/Chat.tsx\",\n                        lineNumber: 126,\n                        columnNumber: 11\n                    }, undefined) : messages.map((msg, i)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ChatMessage__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n                            message: msg\n                        }, i, false, {\n                            fileName: \"/Users/muhammadaushijri/Desktop/git/Hower/typescript/examples/langchain-cdp-chatbot/src/components/Chat.tsx\",\n                            lineNumber: 132,\n                            columnNumber: 13\n                        }, undefined)),\n                    isLoading && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex justify-center\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500\"\n                        }, void 0, false, {\n                            fileName: \"/Users/muhammadaushijri/Desktop/git/Hower/typescript/examples/langchain-cdp-chatbot/src/components/Chat.tsx\",\n                            lineNumber: 137,\n                            columnNumber: 13\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"/Users/muhammadaushijri/Desktop/git/Hower/typescript/examples/langchain-cdp-chatbot/src/components/Chat.tsx\",\n                        lineNumber: 136,\n                        columnNumber: 11\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/muhammadaushijri/Desktop/git/Hower/typescript/examples/langchain-cdp-chatbot/src/components/Chat.tsx\",\n                lineNumber: 124,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"form\", {\n                onSubmit: handleSubmit,\n                className: \"border-t bg-white p-4\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"max-w-4xl mx-auto relative\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                            type: \"text\",\n                            value: inputValue,\n                            onChange: (e)=>setInputValue(e.target.value),\n                            className: \"w-full border rounded-lg px-4 py-3 pr-12 focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500\",\n                            placeholder: \"Type your message...\",\n                            disabled: isLoading\n                        }, void 0, false, {\n                            fileName: \"/Users/muhammadaushijri/Desktop/git/Hower/typescript/examples/langchain-cdp-chatbot/src/components/Chat.tsx\",\n                            lineNumber: 145,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            type: \"submit\",\n                            disabled: isLoading || !inputValue.trim(),\n                            className: \"absolute right-3 top-1/2 -translate-y-1/2 text-blue-500 disabled:text-gray-300\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                className: \"w-6 h-6\",\n                                fill: \"none\",\n                                stroke: \"currentColor\",\n                                viewBox: \"0 0 24 24\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                    strokeLinecap: \"round\",\n                                    strokeLinejoin: \"round\",\n                                    strokeWidth: 2,\n                                    d: \"M12 19l9 2-9-18-9 18 9-2zm0 0v-8\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/muhammadaushijri/Desktop/git/Hower/typescript/examples/langchain-cdp-chatbot/src/components/Chat.tsx\",\n                                    lineNumber: 159,\n                                    columnNumber: 15\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"/Users/muhammadaushijri/Desktop/git/Hower/typescript/examples/langchain-cdp-chatbot/src/components/Chat.tsx\",\n                                lineNumber: 158,\n                                columnNumber: 13\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"/Users/muhammadaushijri/Desktop/git/Hower/typescript/examples/langchain-cdp-chatbot/src/components/Chat.tsx\",\n                            lineNumber: 153,\n                            columnNumber: 11\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/muhammadaushijri/Desktop/git/Hower/typescript/examples/langchain-cdp-chatbot/src/components/Chat.tsx\",\n                    lineNumber: 144,\n                    columnNumber: 9\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"/Users/muhammadaushijri/Desktop/git/Hower/typescript/examples/langchain-cdp-chatbot/src/components/Chat.tsx\",\n                lineNumber: 143,\n                columnNumber: 7\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/muhammadaushijri/Desktop/git/Hower/typescript/examples/langchain-cdp-chatbot/src/components/Chat.tsx\",\n        lineNumber: 116,\n        columnNumber: 5\n    }, undefined);\n};\n_s(Chat, \"bIx2P0dv6nvZOyA7xifrBRpTTNY=\", false, function() {\n    return [\n        _hooks_useChatbot__WEBPACK_IMPORTED_MODULE_3__.useChatbot\n    ];\n});\n_c = Chat;\n/* harmony default export */ __webpack_exports__[\"default\"] = (Chat);\nvar _c;\n$RefreshReg$(_c, \"Chat\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9jb21wb25lbnRzL0NoYXQudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUU0QztBQUNHO0FBSUM7QUFDUjtBQUV4QyxNQUFNSyxPQUFPOztJQUNYLE1BQU0sQ0FBQ0MsWUFBWUMsY0FBYyxHQUFHUCwrQ0FBUUEsQ0FBQztJQUM3QyxNQUFNLEVBQUVRLFFBQVEsRUFBRUMsU0FBUyxFQUFFQyxXQUFXLEVBQUUsR0FBR1AsNkRBQVVBO0lBRXZELCtDQUErQztJQUMvQ0YsZ0RBQVNBLENBQUM7UUFDUixNQUFNVSxnQkFBZ0JDLGFBQWFDLE9BQU8sQ0FBQztRQUMzQyxJQUFJRixlQUFlO1lBQ2pCLE1BQU1HLGlCQUFpQkMsS0FBS0MsS0FBSyxDQUFDTDtZQUNsQ00sWUFBWUg7UUFDZDtJQUNGLEdBQUcsRUFBRTtJQUVMLHFEQUFxRDtJQUNyRGIsZ0RBQVNBLENBQUM7UUFDUlcsYUFBYU0sT0FBTyxDQUFDLGdCQUFnQkgsS0FBS0ksU0FBUyxDQUFDWDtJQUN0RCxHQUFHO1FBQUNBO0tBQVM7SUFFYixNQUFNWSxlQUFlLE9BQU9DO1FBQzFCQSxFQUFFQyxjQUFjO1FBQ2hCLElBQUksQ0FBQ2hCLFdBQVdpQixJQUFJLElBQUk7UUFFeEIsTUFBTUMsY0FBYztZQUNsQkMsU0FBU25CO1lBQ1RvQixNQUFNO1lBQ05DLFdBQVcsSUFBSUMsT0FBT0MsV0FBVztRQUNuQztRQUNBWixZQUFZYSxDQUFBQSxPQUFRO21CQUFJQTtnQkFBTU47YUFBWTtRQUMxQ2pCLGNBQWM7UUFDZCxNQUFNRyxZQUFZSjtJQUNwQjtJQUVBLE1BQU15QixZQUFZO1FBQ2hCLE1BQU1DLFVBQVU5Qix3REFBY0EsQ0FBQytCLFdBQVc7UUFDMUNDLFFBQVFDLEdBQUcsQ0FBQztRQUNaRCxRQUFRQyxHQUFHLENBQUMsbUJBQW1CSCxRQUFRSSxhQUFhO1FBQ3BERixRQUFRQyxHQUFHLENBQUMscUJBQXFCdkIsYUFBYUMsT0FBTyxDQUFDO0lBQ3hEO0lBRUEsTUFBTXdCLGVBQWU7UUFDbkIsTUFBTUMsWUFBWTtZQUNoQkMsS0FBSyxRQUFtQixPQUFYWCxLQUFLWSxHQUFHO1lBQ3JCQyxPQUFPO1lBQ1BDLFdBQVcsSUFBSWQsT0FBT0MsV0FBVztZQUNqQ2MsU0FBUyxJQUFJZixPQUFPQyxXQUFXO1lBQy9CZSxVQUFVO1lBQ1ZDLGFBQWE7WUFDYkMsUUFBUTtZQUNSQyxZQUFZLElBQUluQixPQUFPQyxXQUFXO1lBQ2xDbUIsWUFBWSxJQUFJcEIsT0FBT0MsV0FBVztRQUNwQztRQUVBLE1BQU1HLFVBQVU5Qix3REFBY0EsQ0FBQytCLFdBQVc7UUFDMUNDLFFBQVFDLEdBQUcsQ0FBQztRQUNaSCxRQUFRaUIsWUFBWSxDQUFDWDtRQUNyQkosUUFBUUMsR0FBRyxDQUFDO1FBRVosTUFBTWUsUUFBUSxJQUFJQyxZQUFZLGtCQUFrQjtZQUM5Q0MsUUFBUWQ7UUFDVjtRQUNBZSxPQUFPQyxhQUFhLENBQUNKO1FBQ3JCaEIsUUFBUUMsR0FBRyxDQUFDO0lBQ2Q7SUFFQSxNQUFNb0IsZ0JBQWdCO1FBQ3BCLE1BQU1qQixZQUFZO1lBQ2hCQyxLQUFLLFVBQXFCLE9BQVhYLEtBQUtZLEdBQUc7WUFDdkJDLE9BQU87WUFDUEMsV0FBVyxJQUFJZCxPQUFPQyxXQUFXO1lBQ2pDYyxTQUFTLElBQUlmLE9BQU9DLFdBQVc7WUFDL0JlLFVBQVU7WUFDVkMsYUFBYTtZQUNiQyxRQUFRO1lBQ1JDLFlBQVksSUFBSW5CLE9BQU9DLFdBQVc7WUFDbENtQixZQUFZLElBQUlwQixPQUFPQyxXQUFXO1FBQ3BDO1FBRUEsTUFBTUcsVUFBVTlCLHdEQUFjQSxDQUFDK0IsV0FBVztRQUMxQ0MsUUFBUUMsR0FBRyxDQUFDLCtCQUErQkgsUUFBUUksYUFBYTtRQUNoRUosUUFBUWlCLFlBQVksQ0FBQ1g7UUFDckJKLFFBQVFDLEdBQUcsQ0FBQyw4QkFBOEJILFFBQVFJLGFBQWE7UUFFL0QsTUFBTWMsUUFBUSxJQUFJQyxZQUFZLGtCQUFrQjtZQUM5Q0MsUUFBUWQ7UUFDVjtRQUNBZSxPQUFPQyxhQUFhLENBQUNKO0lBQ3ZCO0lBRUEsTUFBTU0sa0JBQWtCO1FBQ3RCLElBQUk7WUFDRnRCLFFBQVFDLEdBQUcsQ0FBQztZQUNaLE1BQU16QixZQUFZO1lBQ2xCd0IsUUFBUUMsR0FBRyxDQUFDO1FBQ2QsRUFBRSxPQUFPc0IsT0FBTztZQUNkdkIsUUFBUXVCLEtBQUssQ0FBQyw2QkFBNkJBO1FBQzdDO0lBQ0Y7SUFFQSxNQUFNQyxVQUFVO1FBQ2R4QixRQUFRQyxHQUFHLENBQUM7UUFDWixNQUFNd0IsV0FBVyxNQUFNQyxNQUFNO1FBQzdCMUIsUUFBUUMsR0FBRyxDQUFDLHNCQUFzQixNQUFNd0IsU0FBU0UsSUFBSTtJQUN2RDtJQUVBLHFCQUNFLDhEQUFDQztRQUFJQyxXQUFVOzswQkFFYiw4REFBQ0Q7Z0JBQUlDLFdBQVU7O2tDQUNiLDhEQUFDQzt3QkFBR0QsV0FBVTtrQ0FBc0M7Ozs7OztrQ0FDcEQsOERBQUNFO3dCQUFFRixXQUFVO2tDQUF3Qjs7Ozs7Ozs7Ozs7OzBCQUl2Qyw4REFBQ0Q7Z0JBQUlDLFdBQVU7O29CQUNadkQsU0FBUzBELE1BQU0sS0FBSyxrQkFDbkIsOERBQUNKO3dCQUFJQyxXQUFVOzswQ0FDYiw4REFBQ0U7MENBQUU7Ozs7OzswQ0FDSCw4REFBQ0E7Z0NBQUVGLFdBQVU7MENBQWU7Ozs7Ozs7Ozs7O29DQUc5QnZELFNBQVMyRCxHQUFHLENBQUMsQ0FBQ0MsS0FBS0Msa0JBQ2pCLDhEQUFDakUsb0RBQVdBOzRCQUFTa0UsU0FBU0Y7MkJBQVpDOzs7OztvQkFHckI1RCwyQkFDQyw4REFBQ3FEO3dCQUFJQyxXQUFVO2tDQUNiLDRFQUFDRDs0QkFBSUMsV0FBVTs7Ozs7Ozs7Ozs7Ozs7Ozs7MEJBTXJCLDhEQUFDUTtnQkFBS0MsVUFBVXBEO2dCQUFjMkMsV0FBVTswQkFDdEMsNEVBQUNEO29CQUFJQyxXQUFVOztzQ0FDYiw4REFBQ1U7NEJBQ0NDLE1BQUs7NEJBQ0xDLE9BQU9yRTs0QkFDUHNFLFVBQVUsQ0FBQ3ZELElBQU1kLGNBQWNjLEVBQUV3RCxNQUFNLENBQUNGLEtBQUs7NEJBQzdDWixXQUFVOzRCQUNWZSxhQUFZOzRCQUNaQyxVQUFVdEU7Ozs7OztzQ0FFWiw4REFBQ3VFOzRCQUNDTixNQUFLOzRCQUNMSyxVQUFVdEUsYUFBYSxDQUFDSCxXQUFXaUIsSUFBSTs0QkFDdkN3QyxXQUFVO3NDQUVWLDRFQUFDa0I7Z0NBQUlsQixXQUFVO2dDQUFVbUIsTUFBSztnQ0FBT0MsUUFBTztnQ0FBZUMsU0FBUTswQ0FDakUsNEVBQUNDO29DQUFLQyxlQUFjO29DQUFRQyxnQkFBZTtvQ0FBUUMsYUFBYTtvQ0FBR0MsR0FBRTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBT25GO0dBM0pNcEY7O1FBRXlDRix5REFBVUE7OztLQUZuREU7QUE2Sk4sK0RBQWVBLElBQUlBLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vc3JjL2NvbXBvbmVudHMvQ2hhdC50c3g/MzVjYyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCc7XG5cbmltcG9ydCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBTdG9yYWdlU2VydmljZSB9IGZyb20gJ0AvbGliL3N0b3JhZ2UnO1xuaW1wb3J0IHsgVGltZUJsb2NrVHlwZSB9IGZyb20gJ0AvdHlwZXMnO1xuaW1wb3J0IHsgaW5pdGlhbGl6ZUFnZW50IH0gZnJvbSAnQC9zZXJ2aWNlcy9jaGF0Ym90JztcbmltcG9ydCB7IEh1bWFuTWVzc2FnZSB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvbWVzc2FnZXNcIjtcbmltcG9ydCB7IHVzZUNoYXRib3QgfSBmcm9tICdAL2hvb2tzL3VzZUNoYXRib3QnO1xuaW1wb3J0IENoYXRNZXNzYWdlIGZyb20gJy4vQ2hhdE1lc3NhZ2UnO1xuXG5jb25zdCBDaGF0ID0gKCkgPT4ge1xuICBjb25zdCBbaW5wdXRWYWx1ZSwgc2V0SW5wdXRWYWx1ZV0gPSB1c2VTdGF0ZSgnJyk7XG4gIGNvbnN0IHsgbWVzc2FnZXMsIGlzTG9hZGluZywgc2VuZE1lc3NhZ2UgfSA9IHVzZUNoYXRib3QoKTtcblxuICAvLyBMb2FkIGNoYXQgaGlzdG9yeSBmcm9tIGxvY2FsU3RvcmFnZSBvbiBtb3VudFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IHNhdmVkTWVzc2FnZXMgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY2hhdF9oaXN0b3J5Jyk7XG4gICAgaWYgKHNhdmVkTWVzc2FnZXMpIHtcbiAgICAgIGNvbnN0IHBhcnNlZE1lc3NhZ2VzID0gSlNPTi5wYXJzZShzYXZlZE1lc3NhZ2VzKTtcbiAgICAgIHNldE1lc3NhZ2VzKHBhcnNlZE1lc3NhZ2VzKTtcbiAgICB9XG4gIH0sIFtdKTtcblxuICAvLyBTYXZlIG1lc3NhZ2VzIHRvIGxvY2FsU3RvcmFnZSB3aGVuZXZlciB0aGV5IGNoYW5nZVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjaGF0X2hpc3RvcnknLCBKU09OLnN0cmluZ2lmeShtZXNzYWdlcykpO1xuICB9LCBbbWVzc2FnZXNdKTtcblxuICBjb25zdCBoYW5kbGVTdWJtaXQgPSBhc3luYyAoZTogUmVhY3QuRm9ybUV2ZW50KSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGlmICghaW5wdXRWYWx1ZS50cmltKCkpIHJldHVybjtcblxuICAgIGNvbnN0IHVzZXJNZXNzYWdlID0ge1xuICAgICAgY29udGVudDogaW5wdXRWYWx1ZSxcbiAgICAgIHJvbGU6ICd1c2VyJyxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgfTtcbiAgICBzZXRNZXNzYWdlcyhwcmV2ID0+IFsuLi5wcmV2LCB1c2VyTWVzc2FnZV0pO1xuICAgIHNldElucHV0VmFsdWUoJycpO1xuICAgIGF3YWl0IHNlbmRNZXNzYWdlKGlucHV0VmFsdWUpO1xuICB9O1xuXG4gIGNvbnN0IGRlYnVnQ2hhdCA9ICgpID0+IHtcbiAgICBjb25zdCBzdG9yYWdlID0gU3RvcmFnZVNlcnZpY2UuZ2V0SW5zdGFuY2UoKTtcbiAgICBjb25zb2xlLmxvZygnQ2hhdCBEZWJ1ZzonKTtcbiAgICBjb25zb2xlLmxvZygnU3RvcmFnZSBibG9ja3M6Jywgc3RvcmFnZS5nZXRUaW1lQmxvY2tzKCkpO1xuICAgIGNvbnNvbGUubG9nKCdSYXcgbG9jYWxTdG9yYWdlOicsIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjYWxlbmRhcl9kYXRhJykpO1xuICB9O1xuXG4gIGNvbnN0IHRlc3RBZGRFdmVudCA9ICgpID0+IHtcbiAgICBjb25zdCB0ZXN0RXZlbnQgPSB7XG4gICAgICBfaWQ6IGB0ZXN0LSR7RGF0ZS5ub3coKX1gLFxuICAgICAgdGl0bGU6ICdUZXN0IEV2ZW50JyxcbiAgICAgIHN0YXJ0VGltZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgZW5kVGltZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgcHJpb3JpdHk6ICd1cmdlbnQtaW1wb3J0YW50JyBhcyBjb25zdCxcbiAgICAgIGRlbGVnYXRhYmxlOiBmYWxzZSxcbiAgICAgIHN0YXR1czogJ3NjaGVkdWxlZCcsXG4gICAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICB9O1xuXG4gICAgY29uc3Qgc3RvcmFnZSA9IFN0b3JhZ2VTZXJ2aWNlLmdldEluc3RhbmNlKCk7XG4gICAgY29uc29sZS5sb2coJ1Rlc3Q6IEFkZGluZyBldmVudCcpO1xuICAgIHN0b3JhZ2UuYWRkVGltZUJsb2NrKHRlc3RFdmVudCk7XG4gICAgY29uc29sZS5sb2coJ1Rlc3Q6IEV2ZW50IGFkZGVkJyk7XG4gICAgXG4gICAgY29uc3QgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ2NhbGVuZGFyVXBkYXRlJywge1xuICAgICAgZGV0YWlsOiB0ZXN0RXZlbnRcbiAgICB9KTtcbiAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gICAgY29uc29sZS5sb2coJ1Rlc3Q6IEV2ZW50IGRpc3BhdGNoZWQnKTtcbiAgfTtcblxuICBjb25zdCB0ZXN0RGlyZWN0QWRkID0gKCkgPT4ge1xuICAgIGNvbnN0IHRlc3RFdmVudCA9IHtcbiAgICAgIF9pZDogYGRpcmVjdC0ke0RhdGUubm93KCl9YCxcbiAgICAgIHRpdGxlOiAnRGlyZWN0IFRlc3QgRXZlbnQnLFxuICAgICAgc3RhcnRUaW1lOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICBlbmRUaW1lOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICBwcmlvcml0eTogJ3VyZ2VudC1pbXBvcnRhbnQnIGFzIGNvbnN0LFxuICAgICAgZGVsZWdhdGFibGU6IGZhbHNlLFxuICAgICAgc3RhdHVzOiAnc2NoZWR1bGVkJyxcbiAgICAgIGNyZWF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgIH07XG5cbiAgICBjb25zdCBzdG9yYWdlID0gU3RvcmFnZVNlcnZpY2UuZ2V0SW5zdGFuY2UoKTtcbiAgICBjb25zb2xlLmxvZygnRGlyZWN0IFRlc3Q6IEJlZm9yZSBhZGRpbmc6Jywgc3RvcmFnZS5nZXRUaW1lQmxvY2tzKCkpO1xuICAgIHN0b3JhZ2UuYWRkVGltZUJsb2NrKHRlc3RFdmVudCk7XG4gICAgY29uc29sZS5sb2coJ0RpcmVjdCBUZXN0OiBBZnRlciBhZGRpbmc6Jywgc3RvcmFnZS5nZXRUaW1lQmxvY2tzKCkpO1xuICAgIFxuICAgIGNvbnN0IGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCdjYWxlbmRhclVwZGF0ZScsIHtcbiAgICAgIGRldGFpbDogdGVzdEV2ZW50XG4gICAgfSk7XG4gICAgd2luZG93LmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICB9O1xuXG4gIGNvbnN0IHRlc3RTZW5kTWVzc2FnZSA9IGFzeW5jICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc29sZS5sb2coJz09PSBTVEFSVCB0ZXN0U2VuZE1lc3NhZ2UgPT09Jyk7XG4gICAgICBhd2FpdCBzZW5kTWVzc2FnZSgnY2FuIHlvdSBhZGQgb25lIHVyZ2VudCBhbmQgaW1wb3J0YW50IGV2ZW50IGF0IDJwbSBhdCAxMXRoIGZlYnJ1YXJ5IGZvciBvbmUgaG91cj8nKTtcbiAgICAgIGNvbnNvbGUubG9nKCc9PT0gRU5EIHRlc3RTZW5kTWVzc2FnZSA9PT0nKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gdGVzdFNlbmRNZXNzYWdlOicsIGVycm9yKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgdGVzdEFQSSA9IGFzeW5jICgpID0+IHtcbiAgICBjb25zb2xlLmxvZygnVGVzdGluZyBBUEkgcm91dGUuLi4nKTtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCcvYXBpL3Rlc3QnKTtcbiAgICBjb25zb2xlLmxvZygnVGVzdCBBUEkgcmVzcG9uc2U6JywgYXdhaXQgcmVzcG9uc2UudGV4dCgpKTtcbiAgfTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBoLWZ1bGwgYmctZ3JheS01MFwiPlxuICAgICAgey8qIEhlYWRlciAqL31cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctd2hpdGUgc2hhZG93LXNtIHB4LTYgcHktNCBib3JkZXItYlwiPlxuICAgICAgICA8aDEgY2xhc3NOYW1lPVwidGV4dC14bCBmb250LXNlbWlib2xkIHRleHQtZ3JheS04MDBcIj5BSSBBc3Npc3RhbnQ8L2gxPlxuICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtZ3JheS01MDBcIj5Bc2sgbWUgdG8gc2NoZWR1bGUgZXZlbnRzIGZvciB5b3U8L3A+XG4gICAgICA8L2Rpdj5cblxuICAgICAgey8qIE1lc3NhZ2VzICovfVxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4LTEgb3ZlcmZsb3cteS1hdXRvIHAtNiBzcGFjZS15LTRcIj5cbiAgICAgICAge21lc3NhZ2VzLmxlbmd0aCA9PT0gMCA/IChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtY2VudGVyIHRleHQtZ3JheS01MDAgbXQtOFwiPlxuICAgICAgICAgICAgPHA+8J+RiyBIZWxsbyEgSSBjYW4gaGVscCB5b3Ugc2NoZWR1bGUgZXZlbnRzIGFuZCBhcnJhbmdlIHRyYW5zcG9ydGF0aW9uLjwvcD5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc20gbXQtMlwiPlRyeSBzYXlpbmc6IFwiU2NoZWR1bGUgYW4gdXJnZW50IG1lZXRpbmcgdG9tb3Jyb3cgYXQgMnBtXCI8L3A+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICkgOiAoXG4gICAgICAgICAgbWVzc2FnZXMubWFwKChtc2csIGkpID0+IChcbiAgICAgICAgICAgIDxDaGF0TWVzc2FnZSBrZXk9e2l9IG1lc3NhZ2U9e21zZ30gLz5cbiAgICAgICAgICApKVxuICAgICAgICApfVxuICAgICAgICB7aXNMb2FkaW5nICYmIChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1jZW50ZXJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYW5pbWF0ZS1zcGluIHJvdW5kZWQtZnVsbCBoLTggdy04IGJvcmRlci1iLTIgYm9yZGVyLWJsdWUtNTAwXCI+PC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cblxuICAgICAgey8qIElucHV0ICovfVxuICAgICAgPGZvcm0gb25TdWJtaXQ9e2hhbmRsZVN1Ym1pdH0gY2xhc3NOYW1lPVwiYm9yZGVyLXQgYmctd2hpdGUgcC00XCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWF4LXctNHhsIG14LWF1dG8gcmVsYXRpdmVcIj5cbiAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICAgIHZhbHVlPXtpbnB1dFZhbHVlfVxuICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXRJbnB1dFZhbHVlKGUudGFyZ2V0LnZhbHVlKX1cbiAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBib3JkZXIgcm91bmRlZC1sZyBweC00IHB5LTMgcHItMTIgZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOmJvcmRlci1ibHVlLTUwMCBmb2N1czpyaW5nLTEgZm9jdXM6cmluZy1ibHVlLTUwMFwiXG4gICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlR5cGUgeW91ciBtZXNzYWdlLi4uXCJcbiAgICAgICAgICAgIGRpc2FibGVkPXtpc0xvYWRpbmd9XG4gICAgICAgICAgLz5cbiAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICB0eXBlPVwic3VibWl0XCJcbiAgICAgICAgICAgIGRpc2FibGVkPXtpc0xvYWRpbmcgfHwgIWlucHV0VmFsdWUudHJpbSgpfVxuICAgICAgICAgICAgY2xhc3NOYW1lPVwiYWJzb2x1dGUgcmlnaHQtMyB0b3AtMS8yIC10cmFuc2xhdGUteS0xLzIgdGV4dC1ibHVlLTUwMCBkaXNhYmxlZDp0ZXh0LWdyYXktMzAwXCJcbiAgICAgICAgICA+XG4gICAgICAgICAgICA8c3ZnIGNsYXNzTmFtZT1cInctNiBoLTZcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIj5cbiAgICAgICAgICAgICAgPHBhdGggc3Ryb2tlTGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlTGluZWpvaW49XCJyb3VuZFwiIHN0cm9rZVdpZHRoPXsyfSBkPVwiTTEyIDE5bDkgMi05LTE4LTkgMTggOS0yem0wIDB2LThcIiAvPlxuICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9mb3JtPlxuICAgIDwvZGl2PlxuICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgQ2hhdDsgIl0sIm5hbWVzIjpbInVzZVN0YXRlIiwidXNlRWZmZWN0IiwiU3RvcmFnZVNlcnZpY2UiLCJ1c2VDaGF0Ym90IiwiQ2hhdE1lc3NhZ2UiLCJDaGF0IiwiaW5wdXRWYWx1ZSIsInNldElucHV0VmFsdWUiLCJtZXNzYWdlcyIsImlzTG9hZGluZyIsInNlbmRNZXNzYWdlIiwic2F2ZWRNZXNzYWdlcyIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJwYXJzZWRNZXNzYWdlcyIsIkpTT04iLCJwYXJzZSIsInNldE1lc3NhZ2VzIiwic2V0SXRlbSIsInN0cmluZ2lmeSIsImhhbmRsZVN1Ym1pdCIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInRyaW0iLCJ1c2VyTWVzc2FnZSIsImNvbnRlbnQiLCJyb2xlIiwidGltZXN0YW1wIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwicHJldiIsImRlYnVnQ2hhdCIsInN0b3JhZ2UiLCJnZXRJbnN0YW5jZSIsImNvbnNvbGUiLCJsb2ciLCJnZXRUaW1lQmxvY2tzIiwidGVzdEFkZEV2ZW50IiwidGVzdEV2ZW50IiwiX2lkIiwibm93IiwidGl0bGUiLCJzdGFydFRpbWUiLCJlbmRUaW1lIiwicHJpb3JpdHkiLCJkZWxlZ2F0YWJsZSIsInN0YXR1cyIsImNyZWF0ZWRfYXQiLCJ1cGRhdGVkX2F0IiwiYWRkVGltZUJsb2NrIiwiZXZlbnQiLCJDdXN0b21FdmVudCIsImRldGFpbCIsIndpbmRvdyIsImRpc3BhdGNoRXZlbnQiLCJ0ZXN0RGlyZWN0QWRkIiwidGVzdFNlbmRNZXNzYWdlIiwiZXJyb3IiLCJ0ZXN0QVBJIiwicmVzcG9uc2UiLCJmZXRjaCIsInRleHQiLCJkaXYiLCJjbGFzc05hbWUiLCJoMSIsInAiLCJsZW5ndGgiLCJtYXAiLCJtc2ciLCJpIiwibWVzc2FnZSIsImZvcm0iLCJvblN1Ym1pdCIsImlucHV0IiwidHlwZSIsInZhbHVlIiwib25DaGFuZ2UiLCJ0YXJnZXQiLCJwbGFjZWhvbGRlciIsImRpc2FibGVkIiwiYnV0dG9uIiwic3ZnIiwiZmlsbCIsInN0cm9rZSIsInZpZXdCb3giLCJwYXRoIiwic3Ryb2tlTGluZWNhcCIsInN0cm9rZUxpbmVqb2luIiwic3Ryb2tlV2lkdGgiLCJkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/components/Chat.tsx\n"));

/***/ }),

/***/ "(app-pages-browser)/./src/services/chatbot.ts":
/*!*********************************!*\
  !*** ./src/services/chatbot.ts ***!
  \*********************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   initializeAgent: function() { return /* binding */ initializeAgent; }\n/* harmony export */ });\n/* harmony import */ var _langchain_google_genai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @langchain/google-genai */ \"(app-pages-browser)/../../../node_modules/@langchain/google-genai/index.js\");\n/* harmony import */ var _langchain_core_prompts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @langchain/core/prompts */ \"(app-pages-browser)/../../../node_modules/@langchain/core/prompts.js\");\n/* harmony import */ var _taxiService__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./taxiService */ \"(app-pages-browser)/./src/services/taxiService.ts\");\n\n\n\nasync function initializeAgent() {\n    try {\n        console.log(\"Initializing Google AI...\");\n        // Create the model\n        const model = new _langchain_google_genai__WEBPACK_IMPORTED_MODULE_0__.ChatGoogleGenerativeAI({\n            apiKey: \"AIzaSyDJcsRmDoYaG1na_gg7z9-WoSTe82sXwPA\",\n            modelName: \"gemini-pro\",\n            temperature: 0.7\n        });\n        // Create a prompt template with specific format instructions\n        const prompt = _langchain_core_prompts__WEBPACK_IMPORTED_MODULE_1__.ChatPromptTemplate.fromMessages([\n            [\n                \"system\",\n                'You are a helpful assistant that schedules events and handles transportation. Format your responses clearly:\\n\\n      1. First confirm the event details:\\n         ```\\n         schedule_task(\\n           title=\"[title]\",\\n           startTime=\"[time]\",\\n           endTime=\"[time]\",\\n           priority=\"[priority]\",\\n           location=\"[location]\",\\n           needsTransport=[true/false]\\n         )\\n         ```\\n\\n      2. If transport is needed:\\n         ```\\n         book_taxi(\\n           pickup=\"[location]\",\\n           destination=\"[location]\",\\n           pickupTime=\"[time]\"\\n         )\\n         ```\\n\\n      3. After booking, verify payment:\\n         ```\\n         verify_payment(txHash=\"[hash]\")\\n         ```\\n\\n      Respond in this format:\\n      \\uD83D\\uDCC5 Event Scheduled: [title]\\n      ⏰ Time: [start] - [end]\\n      \\uD83D\\uDCCD Location: [location]\\n      \\uD83D\\uDE95 Transport: [details if needed]\\n      \\uD83D\\uDCB0 Payment: [status]\\n      \\n      Keep responses concise and well-formatted.'\n            ],\n            [\n                \"human\",\n                \"{input}\"\n            ]\n        ]);\n        // Create function handlers\n        const functionHandlers = {\n            async book_taxi (params) {\n                const taxiService = _taxiService__WEBPACK_IMPORTED_MODULE_2__.TaxiService.getInstance();\n                const paymentDetails = await taxiService.getPaymentDetails(params.pickup, params.destination);\n                return paymentDetails;\n            },\n            async verify_payment (params) {\n                const taxiService = _taxiService__WEBPACK_IMPORTED_MODULE_2__.TaxiService.getInstance();\n                const verified = await taxiService.verifyPayment(params.txHash);\n                return verified;\n            }\n        };\n        console.log(\"Google AI initialized\");\n        return {\n            agent: model,\n            prompt,\n            functionHandlers,\n            config: {}\n        };\n    } catch (error) {\n        console.error(\"Error initializing agent:\", error);\n        throw error;\n    }\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9zZXJ2aWNlcy9jaGF0Ym90LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBaUU7QUFDSjtBQUNqQjtBQUVyQyxlQUFlRztJQUNwQixJQUFJO1FBQ0ZDLFFBQVFDLEdBQUcsQ0FBQztRQUVaLG1CQUFtQjtRQUNuQixNQUFNQyxRQUFRLElBQUlOLDJFQUFzQkEsQ0FBQztZQUN2Q08sUUFBUUMseUNBQXNDO1lBQzlDRyxXQUFXO1lBQ1hDLGFBQWE7UUFDZjtRQUVBLDZEQUE2RDtRQUM3RCxNQUFNQyxTQUFTWix1RUFBa0JBLENBQUNhLFlBQVksQ0FBQztZQUM3QztnQkFBQztnQkFBVzthQW1DZ0M7WUFDNUM7Z0JBQUM7Z0JBQVM7YUFBVTtTQUNyQjtRQUVELDJCQUEyQjtRQUMzQixNQUFNQyxtQkFBbUI7WUFDdkIsTUFBTUMsV0FBVUMsTUFBVztnQkFDekIsTUFBTUMsY0FBY2hCLHFEQUFXQSxDQUFDaUIsV0FBVztnQkFDM0MsTUFBTUMsaUJBQWlCLE1BQU1GLFlBQVlHLGlCQUFpQixDQUN4REosT0FBT0ssTUFBTSxFQUNiTCxPQUFPTSxXQUFXO2dCQUVwQixPQUFPSDtZQUNUO1lBQ0EsTUFBTUksZ0JBQWVQLE1BQVc7Z0JBQzlCLE1BQU1DLGNBQWNoQixxREFBV0EsQ0FBQ2lCLFdBQVc7Z0JBQzNDLE1BQU1NLFdBQVcsTUFBTVAsWUFBWVEsYUFBYSxDQUFDVCxPQUFPVSxNQUFNO2dCQUM5RCxPQUFPRjtZQUNUO1FBQ0Y7UUFFQXJCLFFBQVFDLEdBQUcsQ0FBQztRQUVaLE9BQU87WUFDTHVCLE9BQU90QjtZQUNQTztZQUNBRTtZQUNBYyxRQUFRLENBQUM7UUFDWDtJQUNGLEVBQUUsT0FBT0MsT0FBTztRQUNkMUIsUUFBUTBCLEtBQUssQ0FBQyw2QkFBNkJBO1FBQzNDLE1BQU1BO0lBQ1I7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9zcmMvc2VydmljZXMvY2hhdGJvdC50cz82NTliIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENoYXRHb29nbGVHZW5lcmF0aXZlQUkgfSBmcm9tIFwiQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWlcIjtcbmltcG9ydCB7IENoYXRQcm9tcHRUZW1wbGF0ZSB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvcHJvbXB0c1wiO1xuaW1wb3J0IHsgVGF4aVNlcnZpY2UgfSBmcm9tICcuL3RheGlTZXJ2aWNlJztcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGluaXRpYWxpemVBZ2VudCgpIHtcbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZygnSW5pdGlhbGl6aW5nIEdvb2dsZSBBSS4uLicpO1xuICAgIFxuICAgIC8vIENyZWF0ZSB0aGUgbW9kZWxcbiAgICBjb25zdCBtb2RlbCA9IG5ldyBDaGF0R29vZ2xlR2VuZXJhdGl2ZUFJKHtcbiAgICAgIGFwaUtleTogcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfR09PR0xFX0FQSV9LRVksXG4gICAgICBtb2RlbE5hbWU6IFwiZ2VtaW5pLXByb1wiLFxuICAgICAgdGVtcGVyYXR1cmU6IDAuNyxcbiAgICB9KTtcblxuICAgIC8vIENyZWF0ZSBhIHByb21wdCB0ZW1wbGF0ZSB3aXRoIHNwZWNpZmljIGZvcm1hdCBpbnN0cnVjdGlvbnNcbiAgICBjb25zdCBwcm9tcHQgPSBDaGF0UHJvbXB0VGVtcGxhdGUuZnJvbU1lc3NhZ2VzKFtcbiAgICAgIFtcInN5c3RlbVwiLCBgWW91IGFyZSBhIGhlbHBmdWwgYXNzaXN0YW50IHRoYXQgc2NoZWR1bGVzIGV2ZW50cyBhbmQgaGFuZGxlcyB0cmFuc3BvcnRhdGlvbi4gRm9ybWF0IHlvdXIgcmVzcG9uc2VzIGNsZWFybHk6XG5cbiAgICAgIDEuIEZpcnN0IGNvbmZpcm0gdGhlIGV2ZW50IGRldGFpbHM6XG4gICAgICAgICBcXGBcXGBcXGBcbiAgICAgICAgIHNjaGVkdWxlX3Rhc2soXG4gICAgICAgICAgIHRpdGxlPVwiW3RpdGxlXVwiLFxuICAgICAgICAgICBzdGFydFRpbWU9XCJbdGltZV1cIixcbiAgICAgICAgICAgZW5kVGltZT1cIlt0aW1lXVwiLFxuICAgICAgICAgICBwcmlvcml0eT1cIltwcmlvcml0eV1cIixcbiAgICAgICAgICAgbG9jYXRpb249XCJbbG9jYXRpb25dXCIsXG4gICAgICAgICAgIG5lZWRzVHJhbnNwb3J0PVt0cnVlL2ZhbHNlXVxuICAgICAgICAgKVxuICAgICAgICAgXFxgXFxgXFxgXG5cbiAgICAgIDIuIElmIHRyYW5zcG9ydCBpcyBuZWVkZWQ6XG4gICAgICAgICBcXGBcXGBcXGBcbiAgICAgICAgIGJvb2tfdGF4aShcbiAgICAgICAgICAgcGlja3VwPVwiW2xvY2F0aW9uXVwiLFxuICAgICAgICAgICBkZXN0aW5hdGlvbj1cIltsb2NhdGlvbl1cIixcbiAgICAgICAgICAgcGlja3VwVGltZT1cIlt0aW1lXVwiXG4gICAgICAgICApXG4gICAgICAgICBcXGBcXGBcXGBcblxuICAgICAgMy4gQWZ0ZXIgYm9va2luZywgdmVyaWZ5IHBheW1lbnQ6XG4gICAgICAgICBcXGBcXGBcXGBcbiAgICAgICAgIHZlcmlmeV9wYXltZW50KHR4SGFzaD1cIltoYXNoXVwiKVxuICAgICAgICAgXFxgXFxgXFxgXG5cbiAgICAgIFJlc3BvbmQgaW4gdGhpcyBmb3JtYXQ6XG4gICAgICDwn5OFIEV2ZW50IFNjaGVkdWxlZDogW3RpdGxlXVxuICAgICAg4o+wIFRpbWU6IFtzdGFydF0gLSBbZW5kXVxuICAgICAg8J+TjSBMb2NhdGlvbjogW2xvY2F0aW9uXVxuICAgICAg8J+alSBUcmFuc3BvcnQ6IFtkZXRhaWxzIGlmIG5lZWRlZF1cbiAgICAgIPCfkrAgUGF5bWVudDogW3N0YXR1c11cbiAgICAgIFxuICAgICAgS2VlcCByZXNwb25zZXMgY29uY2lzZSBhbmQgd2VsbC1mb3JtYXR0ZWQuYF0sXG4gICAgICBbXCJodW1hblwiLCBcIntpbnB1dH1cIl1cbiAgICBdKTtcblxuICAgIC8vIENyZWF0ZSBmdW5jdGlvbiBoYW5kbGVyc1xuICAgIGNvbnN0IGZ1bmN0aW9uSGFuZGxlcnMgPSB7XG4gICAgICBhc3luYyBib29rX3RheGkocGFyYW1zOiBhbnkpIHtcbiAgICAgICAgY29uc3QgdGF4aVNlcnZpY2UgPSBUYXhpU2VydmljZS5nZXRJbnN0YW5jZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50RGV0YWlscyA9IGF3YWl0IHRheGlTZXJ2aWNlLmdldFBheW1lbnREZXRhaWxzKFxuICAgICAgICAgIHBhcmFtcy5waWNrdXAsXG4gICAgICAgICAgcGFyYW1zLmRlc3RpbmF0aW9uXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiBwYXltZW50RGV0YWlscztcbiAgICAgIH0sXG4gICAgICBhc3luYyB2ZXJpZnlfcGF5bWVudChwYXJhbXM6IGFueSkge1xuICAgICAgICBjb25zdCB0YXhpU2VydmljZSA9IFRheGlTZXJ2aWNlLmdldEluc3RhbmNlKCk7XG4gICAgICAgIGNvbnN0IHZlcmlmaWVkID0gYXdhaXQgdGF4aVNlcnZpY2UudmVyaWZ5UGF5bWVudChwYXJhbXMudHhIYXNoKTtcbiAgICAgICAgcmV0dXJuIHZlcmlmaWVkO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBjb25zb2xlLmxvZygnR29vZ2xlIEFJIGluaXRpYWxpemVkJyk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgYWdlbnQ6IG1vZGVsLFxuICAgICAgcHJvbXB0LFxuICAgICAgZnVuY3Rpb25IYW5kbGVycyxcbiAgICAgIGNvbmZpZzoge31cbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluaXRpYWxpemluZyBhZ2VudDonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn0iXSwibmFtZXMiOlsiQ2hhdEdvb2dsZUdlbmVyYXRpdmVBSSIsIkNoYXRQcm9tcHRUZW1wbGF0ZSIsIlRheGlTZXJ2aWNlIiwiaW5pdGlhbGl6ZUFnZW50IiwiY29uc29sZSIsImxvZyIsIm1vZGVsIiwiYXBpS2V5IiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX0dPT0dMRV9BUElfS0VZIiwibW9kZWxOYW1lIiwidGVtcGVyYXR1cmUiLCJwcm9tcHQiLCJmcm9tTWVzc2FnZXMiLCJmdW5jdGlvbkhhbmRsZXJzIiwiYm9va190YXhpIiwicGFyYW1zIiwidGF4aVNlcnZpY2UiLCJnZXRJbnN0YW5jZSIsInBheW1lbnREZXRhaWxzIiwiZ2V0UGF5bWVudERldGFpbHMiLCJwaWNrdXAiLCJkZXN0aW5hdGlvbiIsInZlcmlmeV9wYXltZW50IiwidmVyaWZpZWQiLCJ2ZXJpZnlQYXltZW50IiwidHhIYXNoIiwiYWdlbnQiLCJjb25maWciLCJlcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/services/chatbot.ts\n"));

/***/ })

});